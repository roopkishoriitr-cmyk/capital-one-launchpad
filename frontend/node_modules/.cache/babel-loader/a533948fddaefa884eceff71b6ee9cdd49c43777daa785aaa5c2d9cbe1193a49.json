{"ast":null,"code":"var _jsxFileName = \"/Users/roopkishor.singh/Downloads/capital-one-hackathon/frontend/src/pages/Chat.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { Mic, MicOff, Phone, PhoneOff, Video, VideoOff, Settings, User, Bot, MoreVertical, Minimize2, Maximize2 } from 'lucide-react';\nimport { useAuth } from '../hooks/useAuth';\nimport { toast } from 'react-hot-toast';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Chat = () => {\n  _s();\n  const {\n    user\n  } = useAuth();\n  const [selectedLanguage, setSelectedLanguage] = useState('hi');\n\n  // Video call states\n  const [isVideoOn, setIsVideoOn] = useState(true);\n  const [isAudioOn, setIsAudioOn] = useState(true);\n  const [isMuted, setIsMuted] = useState(false);\n  const [isFullscreen, setIsFullscreen] = useState(false);\n  const [showControls, setShowControls] = useState(true);\n  const [isKrishiMitraSpeaking, setIsKrishiMitraSpeaking] = useState(false);\n  const [currentSpeaker, setCurrentSpeaker] = useState(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const [connectionStatus, setConnectionStatus] = useState('idle');\n\n  // WebRTC refs\n  const remoteAudioRef = useRef(null);\n  const pcRef = useRef(null);\n  const localStreamRef = useRef(null);\n  const dcRef = useRef(null);\n  const sessionIdRef = useRef(null);\n\n  // VAD (Voice Activity Detection) refs\n  const audioContextRef = useRef(null);\n  const analyserRef = useRef(null);\n  const speakingRef = useRef(false);\n  const lastVoiceTsRef = useRef(0);\n\n  // Languages\n  const languages = [{\n    code: 'hi',\n    name: '‡§π‡§ø‡§Ç‡§¶‡•Ä',\n    flag: 'üáÆüá≥'\n  }, {\n    code: 'bn',\n    name: '‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ',\n    flag: 'üáÆüá≥'\n  }, {\n    code: 'ta',\n    name: '‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç',\n    flag: 'üáÆüá≥'\n  }, {\n    code: 'te',\n    name: '‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å',\n    flag: 'üáÆüá≥'\n  }, {\n    code: 'mr',\n    name: '‡§Æ‡§∞‡§æ‡§†‡•Ä',\n    flag: 'üáÆüá≥'\n  }, {\n    code: 'gu',\n    name: '‡™ó‡´Å‡™ú‡™∞‡™æ‡™§‡´Ä',\n    flag: 'üáÆüá≥'\n  }, {\n    code: 'pa',\n    name: '‡®™‡©∞‡®ú‡®æ‡®¨‡©Ä',\n    flag: 'üáÆüá≥'\n  }, {\n    code: 'or',\n    name: '‡¨ì‡¨°‡¨º‡¨ø‡¨Ü',\n    flag: 'üáÆüá≥'\n  }, {\n    code: 'ml',\n    name: '‡¥Æ‡¥≤‡¥Ø‡¥æ‡¥≥‡¥Ç',\n    flag: 'üáÆüá≥'\n  }, {\n    code: 'kn',\n    name: '‡≤ï‡≤®‡≥ç‡≤®‡≤°',\n    flag: 'üáÆüá≥'\n  }, {\n    code: 'en',\n    name: 'English',\n    flag: 'üáÆüá≥'\n  }];\n\n  // VAD functions\n  const rms = buf => {\n    let s = 0;\n    for (let i = 0; i < buf.length; i++) {\n      const v = buf[i];\n      s += v * v;\n    }\n    return Math.sqrt(s / buf.length);\n  };\n  const thresholdToRms = val => {\n    return Math.max(0.003, Math.min(0.12, val / 1000));\n  };\n  const startVAD = () => {\n    if (!audioContextRef.current || !analyserRef.current) return;\n    const buf = new Float32Array(analyserRef.current.fftSize);\n    const loop = () => {\n      if (!analyserRef.current) return;\n      analyserRef.current.getFloatTimeDomainData(buf);\n      const level = rms(buf);\n      const th = thresholdToRms(5); // VAD threshold\n      const now = performance.now();\n      const active = level > th;\n      if (active) {\n        lastVoiceTsRef.current = now;\n        if (!speakingRef.current) {\n          speakingRef.current = true;\n          onSpeechStart();\n        }\n      } else if (speakingRef.current && now - lastVoiceTsRef.current > 500) {\n        speakingRef.current = false;\n        onSpeechEnd();\n      }\n      requestAnimationFrame(loop);\n    };\n    loop();\n  };\n  const onSpeechStart = () => {\n    setCurrentSpeaker('farmer');\n    console.log('üó£Ô∏è Farmer started speaking');\n  };\n  const onSpeechEnd = () => {\n    setCurrentSpeaker(null);\n    console.log('üîá Farmer stopped speaking');\n  };\n  const sendEvent = evt => {\n    if (!dcRef.current || dcRef.current.readyState !== 'open') return;\n    try {\n      dcRef.current.send(JSON.stringify(evt));\n    } catch (e) {\n      console.error('Error sending event:', e);\n    }\n  };\n  const handleDCMessage = e => {\n    try {\n      const msg = JSON.parse(e.data);\n      console.log('üì® Received message:', msg);\n      if (msg.type === 'response.output_text.delta') {\n        setIsKrishiMitraSpeaking(true);\n        setCurrentSpeaker('krishimitra');\n      }\n      if (msg.type === 'response.output_text.done' || msg.type === 'response.completed') {\n        setIsKrishiMitraSpeaking(false);\n        setCurrentSpeaker(null);\n      }\n      if (msg.type === 'response.created' || msg.type === 'response.started') {\n        setIsKrishiMitraSpeaking(true);\n        setCurrentSpeaker('krishimitra');\n      }\n    } catch (err) {\n      console.error('‚ùå Error handling message:', err);\n    }\n  };\n  const startRealtimeSession = async () => {\n    try {\n      setIsLoading(true);\n      setConnectionStatus('requesting mic...');\n      toast.success('üîÑ KrishiMitra Realtime session ‡§∂‡•Å‡§∞‡•Ç ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à...');\n\n      // Get microphone access\n      const localStream = await navigator.mediaDevices.getUserMedia({\n        audio: true\n      });\n      localStreamRef.current = localStream;\n\n      // Create RTCPeerConnection\n      const pc = new RTCPeerConnection({\n        iceServers: [{\n          urls: ['stun:stun.l.google.com:19302']\n        }]\n      });\n      pcRef.current = pc;\n\n      // Set up remote audio element\n      const remoteStream = new MediaStream();\n      if (remoteAudioRef.current) {\n        pc.ontrack = e => {\n          remoteStream.addTrack(e.track);\n          remoteAudioRef.current.srcObject = remoteStream;\n          remoteAudioRef.current.play().catch(() => {});\n        };\n      }\n\n      // Add local tracks\n      for (const track of localStream.getTracks()) {\n        pc.addTrack(track, localStream);\n      }\n\n      // Set up Web Audio for VAD\n      const ac = new (window.AudioContext || window.webkitAudioContext)();\n      audioContextRef.current = ac;\n      const srcNode = ac.createMediaStreamSource(localStream);\n      const analyser = ac.createAnalyser();\n      analyser.fftSize = 1024;\n      analyser.smoothingTimeConstant = 0.2;\n      srcNode.connect(analyser);\n      analyserRef.current = analyser;\n      startVAD();\n\n      // Create DataChannel\n      const dc = pc.createDataChannel('oai-events');\n      dc.onopen = () => console.log('DataChannel open');\n      dc.onmessage = handleDCMessage;\n      dcRef.current = dc;\n\n      // Handle connection state changes\n      pc.onconnectionstatechange = () => {\n        console.log('üîó pc.connectionState:', pc.connectionState);\n        const st = pc.connectionState;\n        if (st === 'connected') {\n          setConnectionStatus('connected');\n          toast.success('‚úÖ KrishiMitra Realtime session ‡§∏‡§ï‡•ç‡§∞‡§ø‡§Ø ‡§π‡•à! ‡§Ö‡§¨ ‡§Ü‡§™ ‡§¨‡•ã‡§≤ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç‡•§');\n        } else if (['disconnected', 'failed', 'closed'].includes(st)) {\n          setConnectionStatus('disconnected');\n          toast.info('üîå Connection ended');\n        }\n      };\n\n      // Create offer\n      const offer = await pc.createOffer({\n        offerToReceiveAudio: true,\n        offerToReceiveVideo: false\n      });\n      await pc.setLocalDescription(offer);\n\n      // Create session on our backend\n      console.log('üåê Requesting session creation from server...');\n      const sess = await fetch('/api/v1/voice/realtime/session', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          voice: 'alloy',\n          language: selectedLanguage,\n          user_id: user === null || user === void 0 ? void 0 : user.id,\n          farmer_context: {\n            location: \"Punjab, India\",\n            crops: [\"wheat\", \"rice\", \"cotton\"],\n            experience: \"15 years\",\n            land_size: \"10 acres\",\n            current_concerns: [\"loan repayment\", \"crop selection\", \"market prices\"]\n          }\n        })\n      }).then(r => r.json());\n      console.log('üìÑ Session response:', sess);\n      sessionIdRef.current = (sess === null || sess === void 0 ? void 0 : sess.session_id) || null;\n\n      // For now, we'll use a simplified approach since we don't have the ephemeral key setup\n      // In a full implementation, you'd need to handle the SDP exchange with OpenAI\n      toast.success('‚úÖ Session created! Voice interaction ready.');\n      setConnectionStatus('connected');\n    } catch (error) {\n      console.error('‚ùå Error starting realtime session:', error);\n      toast.error('‚ùå Realtime session ‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞‡§®‡•á ‡§Æ‡•á‡§Ç ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§´‡§ø‡§∞ ‡§∏‡•á ‡§ï‡•ã‡§∂‡§ø‡§∂ ‡§ï‡§∞‡•á‡§Ç‡•§');\n      setConnectionStatus('error');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  const stopRealtimeSession = () => {\n    console.log('üõë Stopping realtime session...');\n\n    // Close WebRTC connections\n    if (pcRef.current) {\n      pcRef.current.close();\n      pcRef.current = null;\n    }\n    if (localStreamRef.current) {\n      localStreamRef.current.getTracks().forEach(t => t.stop());\n      localStreamRef.current = null;\n    }\n    if (audioContextRef.current) {\n      audioContextRef.current.close();\n      audioContextRef.current = null;\n    }\n    analyserRef.current = null;\n    dcRef.current = null;\n    sessionIdRef.current = null;\n    setConnectionStatus('idle');\n    setCurrentSpeaker(null);\n    setIsKrishiMitraSpeaking(false);\n    toast.success('üõë KrishiMitra Realtime session ‡§¨‡§Ç‡§¶ ‡§π‡•ã ‡§ó‡§Ø‡§æ ‡§π‡•à‡•§');\n  };\n\n  // Cleanup on unmount\n  useEffect(() => {\n    return () => {\n      stopRealtimeSession();\n    };\n  }, []);\n\n  // Video call controls\n  const toggleVideo = () => setIsVideoOn(!isVideoOn);\n  const toggleAudio = () => setIsMuted(!isMuted);\n  const toggleFullscreen = () => setIsFullscreen(!isFullscreen);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `min-h-screen bg-gradient-to-br from-green-50 to-blue-50 ${isFullscreen ? 'fixed inset-0 z-50' : ''}`,\n    children: [/*#__PURE__*/_jsxDEV(\"audio\", {\n      ref: remoteAudioRef,\n      autoPlay: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white shadow-sm border-b\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"max-w-7xl mx-auto px-4 py-3\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center space-x-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-10 h-10 bg-gradient-to-r from-green-500 to-blue-500 rounded-full flex items-center justify-center\",\n              children: /*#__PURE__*/_jsxDEV(Bot, {\n                className: \"w-6 h-6 text-white\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 298,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 297,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                className: \"text-lg font-semibold text-gray-900\",\n                children: \"KrishiMitra Voice Call\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 301,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm text-gray-500\",\n                children: [connectionStatus === 'connected' ? 'üü¢ Connected' : connectionStatus === 'connecting' ? 'üü° Connecting...' : connectionStatus === 'error' ? 'üî¥ Error' : 'üî¥ Disconnected', sessionIdRef.current && ` ‚Ä¢ Session: ${sessionIdRef.current.slice(-8)}`]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 302,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 300,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 296,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center space-x-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"select\", {\n              value: selectedLanguage,\n              onChange: e => setSelectedLanguage(e.target.value),\n              className: \"px-3 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-green-500\",\n              children: languages.map(lang => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: lang.code,\n                children: [lang.flag, \" \", lang.name]\n              }, lang.code, true, {\n                fileName: _jsxFileName,\n                lineNumber: 318,\n                columnNumber: 19\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 312,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: toggleFullscreen,\n              className: \"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors\",\n              children: isFullscreen ? /*#__PURE__*/_jsxDEV(Minimize2, {\n                className: \"w-5 h-5\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 328,\n                columnNumber: 33\n              }, this) : /*#__PURE__*/_jsxDEV(Maximize2, {\n                className: \"w-5 h-5\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 328,\n                columnNumber: 69\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 324,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 311,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-7xl mx-auto px-4 py-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 lg:grid-cols-2 gap-6 h-[calc(100vh-200px)]\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"relative bg-gray-900 rounded-xl overflow-hidden shadow-2xl\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"absolute inset-0 flex items-center justify-center\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-center text-white\",\n              children: [/*#__PURE__*/_jsxDEV(User, {\n                className: \"w-24 h-24 mx-auto mb-4 opacity-50\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 343,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-lg font-semibold\",\n                children: (user === null || user === void 0 ? void 0 : user.name) || '‡§ï‡§ø‡§∏‡§æ‡§®'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 344,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm opacity-75\",\n                children: \"\\u0906\\u092A\\u0915\\u093E \\u0935\\u0940\\u0921\\u093F\\u092F\\u094B\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 345,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 342,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 341,\n            columnNumber: 13\n          }, this), currentSpeaker === 'farmer' && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"absolute top-4 left-4 bg-green-500 text-white px-3 py-1 rounded-full text-sm animate-pulse\",\n            children: \"\\uD83D\\uDDE3\\uFE0F \\u092C\\u094B\\u0932 \\u0930\\u0939\\u0947 \\u0939\\u0948\\u0902\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 351,\n            columnNumber: 15\n          }, this), isMuted && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"absolute top-4 right-4 bg-gray-800 text-white px-3 py-1 rounded-full text-sm\",\n            children: \"\\uD83D\\uDD07 \\u092E\\u094D\\u092F\\u0942\\u091F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 358,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 340,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"relative bg-gray-900 rounded-xl overflow-hidden shadow-2xl\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"absolute inset-0 flex items-center justify-center\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-center text-white\",\n              children: [/*#__PURE__*/_jsxDEV(Bot, {\n                className: \"w-24 h-24 mx-auto mb-4 opacity-50\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 368,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-lg font-semibold\",\n                children: \"KrishiMitra AI\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 369,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm opacity-75\",\n                children: \"AI \\u0938\\u0939\\u093E\\u092F\\u0915\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 370,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 367,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 366,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"absolute top-4 right-4 flex space-x-2\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `px-3 py-1 rounded-full text-sm ${connectionStatus === 'connected' ? 'bg-blue-500 text-white animate-pulse' : 'bg-green-500 text-white'}`,\n              children: connectionStatus === 'connected' ? 'üîÑ Realtime' : 'AI ‡§∏‡§ï‡•ç‡§∞‡§ø‡§Ø'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 376,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 375,\n            columnNumber: 13\n          }, this), isKrishiMitraSpeaking && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"absolute bottom-4 left-4 bg-green-500 text-white px-3 py-1 rounded-full text-sm animate-pulse\",\n            children: \"\\uD83D\\uDDE3\\uFE0F \\u092C\\u094B\\u0932 \\u0930\\u0939\\u093E \\u0939\\u0948\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 387,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 365,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 337,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-6 bg-white rounded-xl shadow-lg p-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center space-x-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: toggleAudio,\n              className: `p-4 rounded-full transition-all duration-200 ${isMuted ? 'bg-red-500 text-white hover:bg-red-600' : 'bg-gray-100 text-gray-700 hover:bg-gray-200'}`,\n              children: isMuted ? /*#__PURE__*/_jsxDEV(MicOff, {\n                className: \"w-6 h-6\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 401,\n                columnNumber: 28\n              }, this) : /*#__PURE__*/_jsxDEV(Mic, {\n                className: \"w-6 h-6\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 401,\n                columnNumber: 61\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 400,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: toggleVideo,\n              className: `p-4 rounded-full transition-all duration-200 ${!isVideoOn ? 'bg-red-500 text-white hover:bg-red-600' : 'bg-gray-100 text-gray-700 hover:bg-gray-200'}`,\n              children: isVideoOn ? /*#__PURE__*/_jsxDEV(Video, {\n                className: \"w-6 h-6\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 405,\n                columnNumber: 30\n              }, this) : /*#__PURE__*/_jsxDEV(VideoOff, {\n                className: \"w-6 h-6\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 405,\n                columnNumber: 62\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 404,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 399,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center space-x-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: stopRealtimeSession,\n              disabled: connectionStatus !== 'connected',\n              className: `p-4 rounded-full transition-colors ${connectionStatus === 'connected' ? 'bg-red-500 text-white hover:bg-red-600' : 'bg-gray-300 text-gray-500 cursor-not-allowed'}`,\n              children: /*#__PURE__*/_jsxDEV(PhoneOff, {\n                className: \"w-6 h-6\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 420,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 411,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: startRealtimeSession,\n              disabled: connectionStatus === 'connected' || isLoading,\n              className: `p-4 rounded-full transition-colors ${connectionStatus === 'connected' || isLoading ? 'bg-green-600 text-white cursor-not-allowed' : 'bg-green-500 text-white hover:bg-green-600'}`,\n              children: isLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-6 h-6 border-2 border-white border-t-transparent rounded-full animate-spin\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 433,\n                columnNumber: 19\n              }, this) : /*#__PURE__*/_jsxDEV(Phone, {\n                className: \"w-6 h-6\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 435,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 423,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 410,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center space-x-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"p-4 bg-gray-100 text-gray-700 rounded-full hover:bg-gray-200 transition-colors\",\n              children: /*#__PURE__*/_jsxDEV(Settings, {\n                className: \"w-6 h-6\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 443,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 442,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"p-4 bg-gray-100 text-gray-700 rounded-full hover:bg-gray-200 transition-colors\",\n              children: /*#__PURE__*/_jsxDEV(MoreVertical, {\n                className: \"w-6 h-6\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 447,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 446,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 441,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 396,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-6 pt-6 border-t border-gray-200\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-lg font-semibold text-gray-900 mb-2\",\n              children: connectionStatus === 'connected' ? 'üé§ Voice Session Active' : 'üìû Start Voice Session'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 455,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-gray-600 mb-4\",\n              children: connectionStatus === 'connected' ? 'KrishiMitra is ready to help you with farming advice. Speak naturally!' : 'Click the green phone button to start a voice conversation with KrishiMitra.'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 458,\n              columnNumber: 15\n            }, this), sessionIdRef.current && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-gray-50 rounded-lg p-4 text-left\",\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                className: \"font-medium text-gray-900 mb-2\",\n                children: \"Session Details:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 467,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-sm text-gray-600 space-y-1\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Session ID:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 469,\n                    columnNumber: 24\n                  }, this), \" \", sessionIdRef.current]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 469,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Language:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 470,\n                    columnNumber: 24\n                  }, this), \" \", selectedLanguage]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 470,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Status:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 471,\n                    columnNumber: 24\n                  }, this), \" \", connectionStatus]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 471,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 468,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 466,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 454,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 453,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 395,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 336,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white border-t mt-6\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"max-w-7xl mx-auto px-4 py-3\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between text-sm text-gray-500\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Powered by KrishiMitra AI\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 484,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"OpenAI Realtime API \\u2022 Voice-First AI Assistant\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 485,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 483,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 482,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 481,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 288,\n    columnNumber: 5\n  }, this);\n};\n_s(Chat, \"V1kVAg5fhr6nE/BJtwNfYG5Z7zc=\", false, function () {\n  return [useAuth];\n});\n_c = Chat;\nexport default Chat;\nvar _c;\n$RefreshReg$(_c, \"Chat\");","map":{"version":3,"names":["React","useState","useEffect","useRef","Mic","MicOff","Phone","PhoneOff","Video","VideoOff","Settings","User","Bot","MoreVertical","Minimize2","Maximize2","useAuth","toast","jsxDEV","_jsxDEV","Chat","_s","user","selectedLanguage","setSelectedLanguage","isVideoOn","setIsVideoOn","isAudioOn","setIsAudioOn","isMuted","setIsMuted","isFullscreen","setIsFullscreen","showControls","setShowControls","isKrishiMitraSpeaking","setIsKrishiMitraSpeaking","currentSpeaker","setCurrentSpeaker","isLoading","setIsLoading","connectionStatus","setConnectionStatus","remoteAudioRef","pcRef","localStreamRef","dcRef","sessionIdRef","audioContextRef","analyserRef","speakingRef","lastVoiceTsRef","languages","code","name","flag","rms","buf","s","i","length","v","Math","sqrt","thresholdToRms","val","max","min","startVAD","current","Float32Array","fftSize","loop","getFloatTimeDomainData","level","th","now","performance","active","onSpeechStart","onSpeechEnd","requestAnimationFrame","console","log","sendEvent","evt","readyState","send","JSON","stringify","e","error","handleDCMessage","msg","parse","data","type","err","startRealtimeSession","success","localStream","navigator","mediaDevices","getUserMedia","audio","pc","RTCPeerConnection","iceServers","urls","remoteStream","MediaStream","ontrack","addTrack","track","srcObject","play","catch","getTracks","ac","window","AudioContext","webkitAudioContext","srcNode","createMediaStreamSource","analyser","createAnalyser","smoothingTimeConstant","connect","dc","createDataChannel","onopen","onmessage","onconnectionstatechange","connectionState","st","includes","info","offer","createOffer","offerToReceiveAudio","offerToReceiveVideo","setLocalDescription","sess","fetch","method","headers","body","voice","language","user_id","id","farmer_context","location","crops","experience","land_size","current_concerns","then","r","json","session_id","stopRealtimeSession","close","forEach","t","stop","toggleVideo","toggleAudio","toggleFullscreen","className","children","ref","autoPlay","fileName","_jsxFileName","lineNumber","columnNumber","slice","value","onChange","target","map","lang","onClick","disabled","_c","$RefreshReg$"],"sources":["/Users/roopkishor.singh/Downloads/capital-one-hackathon/frontend/src/pages/Chat.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { \n  Mic, MicOff, Phone, PhoneOff, Video, VideoOff, Settings, MessageSquare,\n  User, Bot, Volume2, VolumeX, Camera, CameraOff, MoreVertical, Minimize2, Maximize2\n} from 'lucide-react';\nimport { useAuth } from '../hooks/useAuth';\nimport { toast } from 'react-hot-toast';\n\nconst Chat: React.FC = () => {\n  const { user } = useAuth();\n  const [selectedLanguage, setSelectedLanguage] = useState('hi');\n  \n  // Video call states\n  const [isVideoOn, setIsVideoOn] = useState(true);\n  const [isAudioOn, setIsAudioOn] = useState(true);\n  const [isMuted, setIsMuted] = useState(false);\n  const [isFullscreen, setIsFullscreen] = useState(false);\n  const [showControls, setShowControls] = useState(true);\n  const [isKrishiMitraSpeaking, setIsKrishiMitraSpeaking] = useState(false);\n  const [currentSpeaker, setCurrentSpeaker] = useState<'farmer' | 'krishimitra' | null>(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const [connectionStatus, setConnectionStatus] = useState('idle');\n  \n  // WebRTC refs\n  const remoteAudioRef = useRef<HTMLAudioElement>(null);\n  const pcRef = useRef<RTCPeerConnection | null>(null);\n  const localStreamRef = useRef<MediaStream | null>(null);\n  const dcRef = useRef<RTCDataChannel | null>(null);\n  const sessionIdRef = useRef<string | null>(null);\n  \n  // VAD (Voice Activity Detection) refs\n  const audioContextRef = useRef<AudioContext | null>(null);\n  const analyserRef = useRef<AnalyserNode | null>(null);\n  const speakingRef = useRef(false);\n  const lastVoiceTsRef = useRef(0);\n\n  // Languages\n  const languages = [\n    { code: 'hi', name: '‡§π‡§ø‡§Ç‡§¶‡•Ä', flag: 'üáÆüá≥' },\n    { code: 'bn', name: '‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ', flag: 'üáÆüá≥' },\n    { code: 'ta', name: '‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç', flag: 'üáÆüá≥' },\n    { code: 'te', name: '‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å', flag: 'üáÆüá≥' },\n    { code: 'mr', name: '‡§Æ‡§∞‡§æ‡§†‡•Ä', flag: 'üáÆüá≥' },\n    { code: 'gu', name: '‡™ó‡´Å‡™ú‡™∞‡™æ‡™§‡´Ä', flag: 'üáÆüá≥' },\n    { code: 'pa', name: '‡®™‡©∞‡®ú‡®æ‡®¨‡©Ä', flag: 'üáÆüá≥' },\n    { code: 'or', name: '‡¨ì‡¨°‡¨º‡¨ø‡¨Ü', flag: 'üáÆüá≥' },\n    { code: 'ml', name: '‡¥Æ‡¥≤‡¥Ø‡¥æ‡¥≥‡¥Ç', flag: 'üáÆüá≥' },\n    { code: 'kn', name: '‡≤ï‡≤®‡≥ç‡≤®‡≤°', flag: 'üáÆüá≥' },\n    { code: 'en', name: 'English', flag: 'üáÆüá≥' }\n  ];\n\n  // VAD functions\n  const rms = (buf: Float32Array) => {\n    let s = 0;\n    for (let i = 0; i < buf.length; i++) {\n      const v = buf[i];\n      s += v * v;\n    }\n    return Math.sqrt(s / buf.length);\n  };\n\n  const thresholdToRms = (val: number) => {\n    return Math.max(0.003, Math.min(0.12, val / 1000));\n  };\n\n  const startVAD = () => {\n    if (!audioContextRef.current || !analyserRef.current) return;\n    \n    const buf = new Float32Array(analyserRef.current.fftSize);\n    \n    const loop = () => {\n      if (!analyserRef.current) return;\n      \n      analyserRef.current.getFloatTimeDomainData(buf);\n      const level = rms(buf);\n      const th = thresholdToRms(5); // VAD threshold\n      const now = performance.now();\n      const active = level > th;\n\n      if (active) {\n        lastVoiceTsRef.current = now;\n        if (!speakingRef.current) {\n          speakingRef.current = true;\n          onSpeechStart();\n        }\n      } else if (speakingRef.current && (now - lastVoiceTsRef.current) > 500) {\n        speakingRef.current = false;\n        onSpeechEnd();\n      }\n      requestAnimationFrame(loop);\n    };\n    \n    loop();\n  };\n\n  const onSpeechStart = () => {\n    setCurrentSpeaker('farmer');\n    console.log('üó£Ô∏è Farmer started speaking');\n  };\n\n  const onSpeechEnd = () => {\n    setCurrentSpeaker(null);\n    console.log('üîá Farmer stopped speaking');\n  };\n\n  const sendEvent = (evt: any) => {\n    if (!dcRef.current || dcRef.current.readyState !== 'open') return;\n    try {\n      dcRef.current.send(JSON.stringify(evt));\n    } catch (e) {\n      console.error('Error sending event:', e);\n    }\n  };\n\n  const handleDCMessage = (e: MessageEvent) => {\n    try {\n      const msg = JSON.parse(e.data);\n      console.log('üì® Received message:', msg);\n\n      if (msg.type === 'response.output_text.delta') {\n        setIsKrishiMitraSpeaking(true);\n        setCurrentSpeaker('krishimitra');\n      }\n\n      if (msg.type === 'response.output_text.done' || msg.type === 'response.completed') {\n        setIsKrishiMitraSpeaking(false);\n        setCurrentSpeaker(null);\n      }\n\n      if (msg.type === 'response.created' || msg.type === 'response.started') {\n        setIsKrishiMitraSpeaking(true);\n        setCurrentSpeaker('krishimitra');\n      }\n\n    } catch (err) {\n      console.error('‚ùå Error handling message:', err);\n    }\n  };\n\n  const startRealtimeSession = async () => {\n    try {\n      setIsLoading(true);\n      setConnectionStatus('requesting mic...');\n      toast.success('üîÑ KrishiMitra Realtime session ‡§∂‡•Å‡§∞‡•Ç ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à...');\n      \n      // Get microphone access\n      const localStream = await navigator.mediaDevices.getUserMedia({ audio: true });\n      localStreamRef.current = localStream;\n\n      // Create RTCPeerConnection\n      const pc = new RTCPeerConnection({ \n        iceServers: [{ urls: ['stun:stun.l.google.com:19302'] }] \n      });\n      pcRef.current = pc;\n\n      // Set up remote audio element\n      const remoteStream = new MediaStream();\n      if (remoteAudioRef.current) {\n        pc.ontrack = (e) => {\n          remoteStream.addTrack(e.track);\n          remoteAudioRef.current!.srcObject = remoteStream;\n          remoteAudioRef.current!.play().catch(() => {});\n        };\n      }\n\n      // Add local tracks\n      for (const track of localStream.getTracks()) {\n        pc.addTrack(track, localStream);\n      }\n\n      // Set up Web Audio for VAD\n      const ac = new (window.AudioContext || (window as any).webkitAudioContext)();\n      audioContextRef.current = ac;\n      const srcNode = ac.createMediaStreamSource(localStream);\n      const analyser = ac.createAnalyser();\n      analyser.fftSize = 1024;\n      analyser.smoothingTimeConstant = 0.2;\n      srcNode.connect(analyser);\n      analyserRef.current = analyser;\n      startVAD();\n\n      // Create DataChannel\n      const dc = pc.createDataChannel('oai-events');\n      dc.onopen = () => console.log('DataChannel open');\n      dc.onmessage = handleDCMessage;\n      dcRef.current = dc;\n\n      // Handle connection state changes\n      pc.onconnectionstatechange = () => {\n        console.log('üîó pc.connectionState:', pc.connectionState);\n        const st = pc.connectionState;\n        if (st === 'connected') {\n          setConnectionStatus('connected');\n          toast.success('‚úÖ KrishiMitra Realtime session ‡§∏‡§ï‡•ç‡§∞‡§ø‡§Ø ‡§π‡•à! ‡§Ö‡§¨ ‡§Ü‡§™ ‡§¨‡•ã‡§≤ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç‡•§');\n        } else if (['disconnected', 'failed', 'closed'].includes(st)) {\n          setConnectionStatus('disconnected');\n          toast.info('üîå Connection ended');\n        }\n      };\n\n      // Create offer\n      const offer = await pc.createOffer({ \n        offerToReceiveAudio: true, \n        offerToReceiveVideo: false \n      });\n      await pc.setLocalDescription(offer);\n\n      // Create session on our backend\n      console.log('üåê Requesting session creation from server...');\n      const sess = await fetch('/api/v1/voice/realtime/session', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          voice: 'alloy',\n          language: selectedLanguage,\n          user_id: user?.id,\n          farmer_context: {\n            location: \"Punjab, India\",\n            crops: [\"wheat\", \"rice\", \"cotton\"],\n            experience: \"15 years\",\n            land_size: \"10 acres\",\n            current_concerns: [\"loan repayment\", \"crop selection\", \"market prices\"]\n          }\n        })\n      }).then(r => r.json());\n\n      console.log('üìÑ Session response:', sess);\n      sessionIdRef.current = sess?.session_id || null;\n\n      // For now, we'll use a simplified approach since we don't have the ephemeral key setup\n      // In a full implementation, you'd need to handle the SDP exchange with OpenAI\n      toast.success('‚úÖ Session created! Voice interaction ready.');\n      setConnectionStatus('connected');\n\n    } catch (error) {\n      console.error('‚ùå Error starting realtime session:', error);\n      toast.error('‚ùå Realtime session ‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞‡§®‡•á ‡§Æ‡•á‡§Ç ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§´‡§ø‡§∞ ‡§∏‡•á ‡§ï‡•ã‡§∂‡§ø‡§∂ ‡§ï‡§∞‡•á‡§Ç‡•§');\n      setConnectionStatus('error');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const stopRealtimeSession = () => {\n    console.log('üõë Stopping realtime session...');\n    \n    // Close WebRTC connections\n    if (pcRef.current) {\n      pcRef.current.close();\n      pcRef.current = null;\n    }\n    \n    if (localStreamRef.current) {\n      localStreamRef.current.getTracks().forEach(t => t.stop());\n      localStreamRef.current = null;\n    }\n    \n    if (audioContextRef.current) {\n      audioContextRef.current.close();\n      audioContextRef.current = null;\n    }\n    \n    analyserRef.current = null;\n    dcRef.current = null;\n    sessionIdRef.current = null;\n    \n    setConnectionStatus('idle');\n    setCurrentSpeaker(null);\n    setIsKrishiMitraSpeaking(false);\n    \n    toast.success('üõë KrishiMitra Realtime session ‡§¨‡§Ç‡§¶ ‡§π‡•ã ‡§ó‡§Ø‡§æ ‡§π‡•à‡•§');\n  };\n\n  // Cleanup on unmount\n  useEffect(() => {\n    return () => {\n      stopRealtimeSession();\n    };\n  }, []);\n\n  // Video call controls\n  const toggleVideo = () => setIsVideoOn(!isVideoOn);\n  const toggleAudio = () => setIsMuted(!isMuted);\n  const toggleFullscreen = () => setIsFullscreen(!isFullscreen);\n\n  return (\n    <div className={`min-h-screen bg-gradient-to-br from-green-50 to-blue-50 ${isFullscreen ? 'fixed inset-0 z-50' : ''}`}>\n      {/* Hidden audio element for remote audio */}\n      <audio ref={remoteAudioRef} autoPlay />\n      \n      {/* Header */}\n      <div className=\"bg-white shadow-sm border-b\">\n        <div className=\"max-w-7xl mx-auto px-4 py-3\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center space-x-3\">\n              <div className=\"w-10 h-10 bg-gradient-to-r from-green-500 to-blue-500 rounded-full flex items-center justify-center\">\n                <Bot className=\"w-6 h-6 text-white\" />\n              </div>\n              <div>\n                <h1 className=\"text-lg font-semibold text-gray-900\">KrishiMitra Voice Call</h1>\n                <p className=\"text-sm text-gray-500\">\n                  {connectionStatus === 'connected' ? 'üü¢ Connected' : \n                   connectionStatus === 'connecting' ? 'üü° Connecting...' :\n                   connectionStatus === 'error' ? 'üî¥ Error' : 'üî¥ Disconnected'}\n                  {sessionIdRef.current && ` ‚Ä¢ Session: ${sessionIdRef.current.slice(-8)}`}\n                </p>\n              </div>\n            </div>\n            \n            <div className=\"flex items-center space-x-2\">\n              <select\n                value={selectedLanguage}\n                onChange={(e) => setSelectedLanguage(e.target.value)}\n                className=\"px-3 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-green-500\"\n              >\n                {languages.map(lang => (\n                  <option key={lang.code} value={lang.code}>\n                    {lang.flag} {lang.name}\n                  </option>\n                ))}\n              </select>\n              \n              <button\n                onClick={toggleFullscreen}\n                className=\"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors\"\n              >\n                {isFullscreen ? <Minimize2 className=\"w-5 h-5\" /> : <Maximize2 className=\"w-5 h-5\" />}\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Video Call Interface */}\n      <div className=\"max-w-7xl mx-auto px-4 py-6\">\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6 h-[calc(100vh-200px)]\">\n          \n          {/* Farmer's Video Panel */}\n          <div className=\"relative bg-gray-900 rounded-xl overflow-hidden shadow-2xl\">\n            <div className=\"absolute inset-0 flex items-center justify-center\">\n              <div className=\"text-center text-white\">\n                <User className=\"w-24 h-24 mx-auto mb-4 opacity-50\" />\n                <p className=\"text-lg font-semibold\">{user?.name || '‡§ï‡§ø‡§∏‡§æ‡§®'}</p>\n                <p className=\"text-sm opacity-75\">‡§Ü‡§™‡§ï‡§æ ‡§µ‡•Ä‡§°‡§ø‡§Ø‡•ã</p>\n              </div>\n            </div>\n            \n            {/* Speaking indicator */}\n            {currentSpeaker === 'farmer' && (\n              <div className=\"absolute top-4 left-4 bg-green-500 text-white px-3 py-1 rounded-full text-sm animate-pulse\">\n                üó£Ô∏è ‡§¨‡•ã‡§≤ ‡§∞‡§π‡•á ‡§π‡•à‡§Ç\n              </div>\n            )}\n            \n            {/* Audio indicator */}\n            {isMuted && (\n              <div className=\"absolute top-4 right-4 bg-gray-800 text-white px-3 py-1 rounded-full text-sm\">\n                üîá ‡§Æ‡•ç‡§Ø‡•Ç‡§ü\n              </div>\n            )}\n          </div>\n\n          {/* KrishiMitra's Video Panel */}\n          <div className=\"relative bg-gray-900 rounded-xl overflow-hidden shadow-2xl\">\n            <div className=\"absolute inset-0 flex items-center justify-center\">\n              <div className=\"text-center text-white\">\n                <Bot className=\"w-24 h-24 mx-auto mb-4 opacity-50\" />\n                <p className=\"text-lg font-semibold\">KrishiMitra AI</p>\n                <p className=\"text-sm opacity-75\">AI ‡§∏‡§π‡§æ‡§Ø‡§ï</p>\n              </div>\n            </div>\n            \n            {/* AI Status */}\n            <div className=\"absolute top-4 right-4 flex space-x-2\">\n              <div className={`px-3 py-1 rounded-full text-sm ${\n                connectionStatus === 'connected'\n                  ? 'bg-blue-500 text-white animate-pulse' \n                  : 'bg-green-500 text-white'\n              }`}>\n                {connectionStatus === 'connected' ? 'üîÑ Realtime' : 'AI ‡§∏‡§ï‡•ç‡§∞‡§ø‡§Ø'}\n              </div>\n            </div>\n            \n            {/* Speaking indicator */}\n            {isKrishiMitraSpeaking && (\n              <div className=\"absolute bottom-4 left-4 bg-green-500 text-white px-3 py-1 rounded-full text-sm animate-pulse\">\n                üó£Ô∏è ‡§¨‡•ã‡§≤ ‡§∞‡§π‡§æ ‡§π‡•à\n              </div>\n            )}\n          </div>\n        </div>\n\n        {/* Control Panel */}\n        <div className=\"mt-6 bg-white rounded-xl shadow-lg p-6\">\n          <div className=\"flex items-center justify-between\">\n            \n            {/* Left Controls */}\n            <div className=\"flex items-center space-x-4\">\n              <button onClick={toggleAudio} className={`p-4 rounded-full transition-all duration-200 ${isMuted ? 'bg-red-500 text-white hover:bg-red-600' : 'bg-gray-100 text-gray-700 hover:bg-gray-200'}`}>\n                {isMuted ? <MicOff className=\"w-6 h-6\" /> : <Mic className=\"w-6 h-6\" />}\n              </button>\n              \n              <button onClick={toggleVideo} className={`p-4 rounded-full transition-all duration-200 ${!isVideoOn ? 'bg-red-500 text-white hover:bg-red-600' : 'bg-gray-100 text-gray-700 hover:bg-gray-200'}`}>\n                {isVideoOn ? <Video className=\"w-6 h-6\" /> : <VideoOff className=\"w-6 h-6\" />}\n              </button>\n            </div>\n\n            {/* Center - Call Controls */}\n            <div className=\"flex items-center space-x-4\">\n              <button \n                onClick={stopRealtimeSession} \n                disabled={connectionStatus !== 'connected'}\n                className={`p-4 rounded-full transition-colors ${\n                  connectionStatus === 'connected'\n                    ? 'bg-red-500 text-white hover:bg-red-600' \n                    : 'bg-gray-300 text-gray-500 cursor-not-allowed'\n                }`}\n              >\n                <PhoneOff className=\"w-6 h-6\" />\n              </button>\n              \n              <button \n                onClick={startRealtimeSession} \n                disabled={connectionStatus === 'connected' || isLoading}\n                className={`p-4 rounded-full transition-colors ${\n                  connectionStatus === 'connected' || isLoading\n                    ? 'bg-green-600 text-white cursor-not-allowed' \n                    : 'bg-green-500 text-white hover:bg-green-600'\n                }`}\n              >\n                {isLoading ? (\n                  <div className=\"w-6 h-6 border-2 border-white border-t-transparent rounded-full animate-spin\" />\n                ) : (\n                  <Phone className=\"w-6 h-6\" />\n                )}\n              </button>\n            </div>\n\n            {/* Right Controls */}\n            <div className=\"flex items-center space-x-4\">\n              <button className=\"p-4 bg-gray-100 text-gray-700 rounded-full hover:bg-gray-200 transition-colors\">\n                <Settings className=\"w-6 h-6\" />\n              </button>\n              \n              <button className=\"p-4 bg-gray-100 text-gray-700 rounded-full hover:bg-gray-200 transition-colors\">\n                <MoreVertical className=\"w-6 h-6\" />\n              </button>\n            </div>\n          </div>\n\n          {/* Status Information */}\n          <div className=\"mt-6 pt-6 border-t border-gray-200\">\n            <div className=\"text-center\">\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">\n                {connectionStatus === 'connected' ? 'üé§ Voice Session Active' : 'üìû Start Voice Session'}\n              </h3>\n              <p className=\"text-sm text-gray-600 mb-4\">\n                {connectionStatus === 'connected'\n                  ? 'KrishiMitra is ready to help you with farming advice. Speak naturally!'\n                  : 'Click the green phone button to start a voice conversation with KrishiMitra.'\n                }\n              </p>\n              \n              {sessionIdRef.current && (\n                <div className=\"bg-gray-50 rounded-lg p-4 text-left\">\n                  <h4 className=\"font-medium text-gray-900 mb-2\">Session Details:</h4>\n                  <div className=\"text-sm text-gray-600 space-y-1\">\n                    <p><strong>Session ID:</strong> {sessionIdRef.current}</p>\n                    <p><strong>Language:</strong> {selectedLanguage}</p>\n                    <p><strong>Status:</strong> {connectionStatus}</p>\n                  </div>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Footer */}\n      <div className=\"bg-white border-t mt-6\">\n        <div className=\"max-w-7xl mx-auto px-4 py-3\">\n          <div className=\"flex items-center justify-between text-sm text-gray-500\">\n            <span>Powered by KrishiMitra AI</span>\n            <span>OpenAI Realtime API ‚Ä¢ Voice-First AI Assistant</span>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Chat;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}