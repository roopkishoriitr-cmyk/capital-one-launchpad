{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import{Mic,MicOff,Phone,PhoneOff,Video,VideoOff,Settings,User,Bot,Volume2,Camera,MoreVertical,Minimize2,Maximize2}from'lucide-react';import{useAuth}from'../hooks/useAuth';import{useChat}from'../contexts/ChatContext';import{toast}from'react-hot-toast';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Chat=()=>{const{user}=useAuth();const{messages,sendMessage,isConnected}=useChat();const[inputText,setInputText]=useState('');const[selectedLanguage,setSelectedLanguage]=useState('hi');const[isRecording,setIsRecording]=useState(false);const[mediaRecorder,setMediaRecorder]=useState(null);const[audioChunks,setAudioChunks]=useState([]);const[isListening,setIsListening]=useState(false);const[voicePrompt,setVoicePrompt]=useState('‡§Æ‡§æ‡§á‡§ï ‡§™‡§∞ ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§ï‡§∞‡§ï‡•á ‡§¨‡•ã‡§≤‡•á‡§Ç');// Video call states\nconst[isVideoOn,setIsVideoOn]=useState(true);const[isAudioOn,setIsAudioOn]=useState(true);const[isMuted,setIsMuted]=useState(false);const[isFullscreen,setIsFullscreen]=useState(false);const[showControls,setShowControls]=useState(true);const[isKrishiMitraSpeaking,setIsKrishiMitraSpeaking]=useState(false);const[currentSpeaker,setCurrentSpeaker]=useState(null);const[realtimeSession,setRealtimeSession]=useState(null);const[isRealtimeActive,setIsRealtimeActive]=useState(false);const messagesEndRef=useRef(null);const videoRef=useRef(null);const krishiMitraVideoRef=useRef(null);const languages=[{code:'hi',name:'‡§π‡§ø‡§Ç‡§¶‡•Ä',flag:'üáÆüá≥'},{code:'en',name:'English',flag:'üáÆüá≥'},{code:'bn',name:'‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ',flag:'üáÆüá≥'},{code:'ta',name:'‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç',flag:'üáÆüá≥'},{code:'te',name:'‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å',flag:'üáÆüá≥'},{code:'mr',name:'‡§Æ‡§∞‡§æ‡§†‡•Ä',flag:'üáÆüá≥'},{code:'gu',name:'‡™ó‡´Å‡™ú‡™∞‡™æ‡™§‡´Ä',flag:'üáÆüá≥'},{code:'pa',name:'‡®™‡©∞‡®ú‡®æ‡®¨‡©Ä',flag:'üáÆüá≥'},{code:'or',name:'‡¨ì‡¨°‡¨º‡¨ø‡¨Ü',flag:'üáÆüá≥'},{code:'ml',name:'‡¥Æ‡¥≤‡¥Ø‡¥æ‡¥≥‡¥Ç',flag:'üáÆüá≥'},{code:'kn',name:'‡≤ï‡≤®‡≥ç‡≤®‡≤°',flag:'üáÆüá≥'}];useEffect(()=>{// Add welcome message\nif(messages.length===0){addMessage({id:'welcome',text:\"\\u0928\\u092E\\u0938\\u094D\\u0924\\u0947 \".concat((user===null||user===void 0?void 0:user.name)||'‡§ï‡§ø‡§∏‡§æ‡§®',\"! \\u092E\\u0948\\u0902 KrishiMitra \\u0906\\u092A\\u0915\\u0940 \\u0915\\u0948\\u0938\\u0947 \\u092E\\u0926\\u0926 \\u0915\\u0930 \\u0938\\u0915\\u0924\\u093E \\u0939\\u0942\\u0902? \\u092C\\u094B\\u0932\\u0915\\u0930 \\u0905\\u092A\\u0928\\u093E \\u0938\\u0935\\u093E\\u0932 \\u092A\\u0942\\u091B\\u0947\\u0902 - \\u092B\\u0938\\u0932, \\u090B\\u0923, \\u092E\\u0902\\u0921\\u0940 \\u092D\\u093E\\u0935, \\u092E\\u094C\\u0938\\u092E \\u092F\\u093E \\u0938\\u0930\\u0915\\u093E\\u0930\\u0940 \\u092F\\u094B\\u091C\\u0928\\u093E\\u0913\\u0902 \\u0915\\u0947 \\u092C\\u093E\\u0930\\u0947 \\u092E\\u0947\\u0902\\u0964\"),sender:'ai',timestamp:new Date(),metadata:{voice_ready:[\"\\u0928\\u092E\\u0938\\u094D\\u0924\\u0947 \".concat((user===null||user===void 0?void 0:user.name)||'‡§ï‡§ø‡§∏‡§æ‡§®',\"! \\u092E\\u0948\\u0902 KrishiMitra \\u0906\\u092A\\u0915\\u0940 \\u0915\\u0948\\u0938\\u0947 \\u092E\\u0926\\u0926 \\u0915\\u0930 \\u0938\\u0915\\u0924\\u093E \\u0939\\u0942\\u0902?\"),\"‡§¨‡•ã‡§≤‡§ï‡§∞ ‡§Ö‡§™‡§®‡§æ ‡§∏‡§µ‡§æ‡§≤ ‡§™‡•Ç‡§õ‡•á‡§Ç - ‡§´‡§∏‡§≤, ‡§ã‡§£, ‡§Æ‡§Ç‡§°‡•Ä ‡§≠‡§æ‡§µ, ‡§Æ‡•å‡§∏‡§Æ ‡§Ø‡§æ ‡§∏‡§∞‡§ï‡§æ‡§∞‡•Ä ‡§Ø‡•ã‡§ú‡§®‡§æ‡§ì‡§Ç ‡§ï‡•á ‡§¨‡§æ‡§∞‡•á ‡§Æ‡•á‡§Ç‡•§\"],intent:'welcome',suggestions:['‡§´‡§∏‡§≤ ‡§ï‡•Ä ‡§∏‡§≤‡§æ‡§π ‡§≤‡•á‡§Ç','‡§ã‡§£ ‡§ï‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§≤‡•á‡§Ç','‡§Æ‡§Ç‡§°‡•Ä ‡§≠‡§æ‡§µ ‡§ú‡§æ‡§®‡•á‡§Ç','‡§Æ‡•å‡§∏‡§Æ ‡§ï‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§≤‡•á‡§Ç']}});}},[messages.length,user===null||user===void 0?void 0:user.name]);useEffect(()=>{var _messagesEndRef$curre;(_messagesEndRef$curre=messagesEndRef.current)===null||_messagesEndRef$curre===void 0?void 0:_messagesEndRef$curre.scrollIntoView({behavior:'smooth'});},[messages]);const addMessage=message=>{// This would be handled by the chat context\nconsole.log('Adding message:',message);};const handleSendMessage=async()=>{if(!inputText.trim())return;setCurrentSpeaker('farmer');setIsKrishiMitraSpeaking(false);await sendMessage(inputText,selectedLanguage);setInputText('');// Simulate KrishiMitra response\nsetTimeout(()=>{setCurrentSpeaker('krishimitra');setIsKrishiMitraSpeaking(true);// Stop speaking after 3 seconds\nsetTimeout(()=>{setIsKrishiMitraSpeaking(false);setCurrentSpeaker(null);},3000);},1000);};const handleKeyPress=e=>{if(e.key==='Enter'&&!e.shiftKey){e.preventDefault();handleSendMessage();}};const startVoiceRecording=async()=>{try{const stream=await navigator.mediaDevices.getUserMedia({audio:true});const recorder=new MediaRecorder(stream);const chunks=[];recorder.ondataavailable=event=>{if(event.data.size>0){chunks.push(event.data);}};recorder.onstop=async()=>{const audioBlob=new Blob(chunks,{type:'audio/wav'});await processVoiceInput(audioBlob);stream.getTracks().forEach(track=>track.stop());};setMediaRecorder(recorder);setAudioChunks(chunks);recorder.start();setIsRecording(true);setIsListening(true);setVoicePrompt('‡§¨‡•ã‡§≤ ‡§∞‡§π‡•á ‡§π‡•à‡§Ç...');setCurrentSpeaker('farmer');toast.success('üé§ KrishiMitra ‡§∏‡•Å‡§® ‡§∞‡§π‡§æ ‡§π‡•à‡•§ ‡§¨‡•ã‡§≤‡•á‡§Ç...');// Auto-stop after 15 seconds\nsetTimeout(()=>{if(recorder.state==='recording'){stopVoiceRecording();}},15000);}catch(error){console.error('Error starting voice recording:',error);toast.error('‡§Æ‡§æ‡§á‡§ï‡•ç‡§∞‡•ã‡§´‡•ã‡§® ‡§ï‡•Ä ‡§Ö‡§®‡•Å‡§Æ‡§§‡§ø ‡§¶‡•á‡§Ç');}};const stopVoiceRecording=()=>{if(mediaRecorder&&mediaRecorder.state==='recording'){mediaRecorder.stop();setIsRecording(false);setIsListening(false);setVoicePrompt('‡§Æ‡§æ‡§á‡§ï ‡§™‡§∞ ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§ï‡§∞‡§ï‡•á ‡§¨‡•ã‡§≤‡•á‡§Ç');setCurrentSpeaker(null);toast.success('‚úÖ ‡§Ü‡§µ‡§æ‡§ú ‡§∞‡§ø‡§ï‡•â‡§∞‡•ç‡§°‡§ø‡§Ç‡§ó ‡§¨‡§Ç‡§¶');}};const processVoiceInput=async audioBlob=>{try{toast.success('üéµ OpenAI Voice API ‡§∏‡•á ‡§Ü‡§µ‡§æ‡§ú ‡§™‡•ç‡§∞‡•ã‡§∏‡•á‡§∏ ‡§π‡•ã ‡§∞‡§π‡•Ä ‡§π‡•à...');// Create FormData for file upload\nconst formData=new FormData();formData.append('audio_file',audioBlob,'voice_input.wav');formData.append('language',selectedLanguage);// Send to OpenAI Voice API endpoint\nconst response=await fetch('/api/v1/voice/speech-to-text',{method:'POST',body:formData});if(!response.ok){throw new Error('Voice processing failed');}const result=await response.json();if(result.text){// Set the transcribed text and send the message\nsetInputText(result.text);await sendMessage(result.text,result.language||selectedLanguage);toast.success('üéØ OpenAI Whisper ‡§∏‡•á ‡§Ü‡§µ‡§æ‡§ú ‡§∏‡§´‡§≤‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§™‡•ç‡§∞‡•ã‡§∏‡•á‡§∏ ‡§π‡•Å‡§à!');}else{throw new Error('No text detected');}}catch(error){console.error('Error processing voice input:',error);// Fallback to mock processing for demo\ntoast.success('üîÑ OpenAI API ‡§ï‡•á ‡§∏‡§æ‡§• ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ, ‡§°‡•á‡§Æ‡•ã ‡§Æ‡•ã‡§° ‡§Æ‡•á‡§Ç ‡§ú‡§æ ‡§∞‡§π‡•á ‡§π‡•à‡§Ç...');const mockVoiceTexts={'hi':'‡§Æ‡•á‡§∞‡•Ä ‡§´‡§∏‡§≤ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ï‡•å‡§® ‡§∏‡•Ä ‡§´‡§∏‡§≤ ‡§∏‡§¨‡§∏‡•á ‡§Ö‡§ö‡•ç‡§õ‡•Ä ‡§π‡•ã‡§ó‡•Ä?','bn':'‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶´‡¶∏‡¶≤‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶ï‡ßã‡¶® ‡¶´‡¶∏‡¶≤ ‡¶∏‡¶¨‡¶ö‡ßá‡¶Ø‡¶º‡ßá ‡¶≠‡¶æ‡¶≤‡ßã ‡¶π‡¶¨‡ßá?','ta':'‡Æé‡Æ©‡Øç ‡Æ™‡ÆØ‡Æø‡Æ∞‡ØÅ‡Æï‡Øç‡Æï‡ØÅ ‡Æé‡Æ®‡Øç‡Æ§ ‡Æ™‡ÆØ‡Æø‡Æ∞‡Øç ‡Æö‡Æø‡Æ±‡Æ®‡Øç‡Æ§‡Æ§‡ØÅ?','te':'‡∞®‡∞æ ‡∞™‡∞Ç‡∞ü‡∞ï‡±Å ‡∞è ‡∞™‡∞Ç‡∞ü ‡∞â‡∞§‡±ç‡∞§‡∞Æ‡∞Ç?','mr':'‡∞Æ‡∞æ‡∞ú‡±Ä ‡∞™‡∞ø‡∞ï‡∞æ‡∞∏‡∞æ‡∞ü‡∞ø ‡∞ï‡±ã‡∞®‡∞§‡±á ‡∞™‡±Ä‡∞ï‡±ç ‡∞∏‡∞∞‡±ç‡∞µ‡±ã‡∞§‡±ç‡∞§‡∞Æ‡±ç ‡∞Ö‡∞π‡±á?','gu':'‡™Æ‡™æ‡™∞‡™æ ‡™™‡™æ‡™ï ‡™Æ‡™æ‡™ü‡´á ‡™ï‡™Ø‡´Å‡™Ç ‡™™‡™æ‡™ï ‡™∂‡´ç‡™∞‡´á‡™∑‡´ç‡™† ‡™õ‡´á?','pa':'‡®Æ‡©á‡®∞‡©Ä ‡®´‡®∏‡®≤ ‡®≤‡®à ‡®ï‡®ø‡®π‡©ú‡©Ä ‡®´‡®∏‡®≤ ‡®∏‡®≠ ‡®§‡©ã‡®Ç ‡®µ‡®ß‡©Ä‡®Ü ‡®π‡©à?','or':'‡¨Æ‡≠ã ‡¨´‡¨∏‡¨≤ ‡¨™‡¨æ‡¨á‡¨Å ‡¨ï‡≠á‡¨â‡¨Å ‡¨´‡¨∏‡¨≤ ‡¨∏‡¨∞‡≠ç‡¨¨‡≠ã‡¨§‡≠ç‡¨§‡¨Æ?','ml':'‡¥é‡¥®‡µç‡¥±‡µÜ ‡¥µ‡¥ø‡¥≥‡¥Ø‡µç‡¥ï‡µç‡¥ï‡µç ‡¥è‡¥§‡µç ‡¥µ‡¥ø‡¥≥ ‡¥Æ‡¥ø‡¥ï‡¥ö‡µç‡¥ö‡¥§‡¥æ‡¥£‡µç?','kn':'‡≤®‡≤®‡≥ç‡≤® ‡≤¨‡≥Ü‡≤≥‡≥Ü‡≤ó‡≤æ‡≤ó‡≤ø ‡≤Ø‡≤æ‡≤µ ‡≤¨‡≥Ü‡≤≥‡≥Ü ‡≤â‡≤§‡≥ç‡≤§‡≤Æ?'};const mockText=mockVoiceTexts[selectedLanguage]||mockVoiceTexts['hi'];setInputText(mockText);await sendMessage(mockText,selectedLanguage);toast.success('üéØ ‡§°‡•á‡§Æ‡•ã ‡§Æ‡•ã‡§° ‡§Æ‡•á‡§Ç ‡§Ü‡§µ‡§æ‡§ú ‡§™‡•ç‡§∞‡•ã‡§∏‡•á‡§∏ ‡§π‡•Å‡§à!');}};const handleVoiceToggle=()=>{if(isRecording){stopVoiceRecording();}else{startVoiceRecording();}};const handleQuickAction=async action=>{const message=\"Tell me about \".concat(action.toLowerCase());setInputText(message);await sendMessage(message,selectedLanguage);};const toggleVideo=()=>{setIsVideoOn(!isVideoOn);toast.success(isVideoOn?'üìπ ‡§µ‡•Ä‡§°‡§ø‡§Ø‡•ã ‡§¨‡§Ç‡§¶':'üìπ ‡§µ‡•Ä‡§°‡§ø‡§Ø‡•ã ‡§ö‡§æ‡§≤‡•Ç');};const toggleAudio=()=>{setIsAudioOn(!isAudioOn);setIsMuted(!isMuted);toast.success(isMuted?'üîä ‡§ë‡§°‡§ø‡§Ø‡•ã ‡§ö‡§æ‡§≤‡•Ç':'üîá ‡§ë‡§°‡§ø‡§Ø‡•ã ‡§¨‡§Ç‡§¶');};const toggleFullscreen=()=>{setIsFullscreen(!isFullscreen);toast.success(isFullscreen?'üì± ‡§™‡•Ç‡§∞‡•ç‡§£ ‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§® ‡§¨‡§Ç‡§¶':'üì± ‡§™‡•Ç‡§∞‡•ç‡§£ ‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§® ‡§ö‡§æ‡§≤‡•Ç');};const startRealtimeSession=async()=>{try{toast.success('üîÑ KrishiMitra Realtime session ‡§∂‡•Å‡§∞‡•Ç ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à...');const response=await fetch('/api/v1/voice/realtime/session',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({voice:'alloy',language:selectedLanguage,user_id:user===null||user===void 0?void 0:user.id,farmer_context:{location:'Punjab, India',crops:['wheat','rice','cotton'],experience:'15 years',land_size:'10 acres',current_concerns:['loan repayment','crop selection','market prices']}})});if(!response.ok){throw new Error('Failed to create realtime session');}const sessionData=await response.json();setRealtimeSession(sessionData);setIsRealtimeActive(true);toast.success('‚úÖ KrishiMitra Realtime session ‡§∏‡§ï‡•ç‡§∞‡§ø‡§Ø ‡§π‡•à! ‡§Ö‡§¨ ‡§Ü‡§™ ‡§¨‡•ã‡§≤ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç‡•§');}catch(error){console.error('Error starting realtime session:',error);toast.error('‚ùå Realtime session ‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞‡§®‡•á ‡§Æ‡•á‡§Ç ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§´‡§ø‡§∞ ‡§∏‡•á ‡§ï‡•ã‡§∂‡§ø‡§∂ ‡§ï‡§∞‡•á‡§Ç‡•§');}};const stopRealtimeSession=()=>{setRealtimeSession(null);setIsRealtimeActive(false);toast.success('üõë KrishiMitra Realtime session ‡§¨‡§Ç‡§¶ ‡§π‡•ã ‡§ó‡§Ø‡§æ ‡§π‡•à‡•§');};const quickActions=[{icon:/*#__PURE__*/_jsx(User,{className:\"w-5 h-5\"}),text:'‡§´‡§∏‡§≤ ‡§∏‡§≤‡§æ‡§π',color:'bg-green-500 hover:bg-green-600'},{icon:/*#__PURE__*/_jsx(Bot,{className:\"w-5 h-5\"}),text:'‡§ã‡§£ ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä',color:'bg-blue-500 hover:bg-blue-600'},{icon:/*#__PURE__*/_jsx(Volume2,{className:\"w-5 h-5\"}),text:'‡§Æ‡§Ç‡§°‡•Ä ‡§≠‡§æ‡§µ',color:'bg-yellow-500 hover:bg-yellow-600'},{icon:/*#__PURE__*/_jsx(Camera,{className:\"w-5 h-5\"}),text:'‡§Æ‡•å‡§∏‡§Æ ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä',color:'bg-purple-500 hover:bg-purple-600'}];return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gradient-to-br from-green-50 to-blue-50 \".concat(isFullscreen?'fixed inset-0 z-50':''),children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white shadow-sm border-b\",children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-7xl mx-auto px-4 py-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 bg-gradient-to-r from-green-500 to-blue-500 rounded-full flex items-center justify-center\",children:/*#__PURE__*/_jsx(Bot,{className:\"w-6 h-6 text-white\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-lg font-semibold text-gray-900\",children:\"KrishiMitra Video Call\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:isConnected?'üü¢ Connected':'üî¥ Disconnected'})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"select\",{value:selectedLanguage,onChange:e=>setSelectedLanguage(e.target.value),className:\"px-3 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-green-500\",children:languages.map(lang=>/*#__PURE__*/_jsxs(\"option\",{value:lang.code,children:[lang.flag,\" \",lang.name]},lang.code))}),/*#__PURE__*/_jsx(\"button\",{onClick:toggleFullscreen,className:\"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors\",children:isFullscreen?/*#__PURE__*/_jsx(Minimize2,{className:\"w-5 h-5\"}):/*#__PURE__*/_jsx(Maximize2,{className:\"w-5 h-5\"})})]})]})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto px-4 py-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-2 gap-6 h-[calc(100vh-200px)]\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative bg-gray-900 rounded-xl overflow-hidden shadow-2xl\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 bg-gradient-to-br from-green-600/20 to-blue-600/20 z-10\"}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 flex items-center justify-center\",children:isVideoOn?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-32 h-32 bg-gradient-to-r from-green-500 to-blue-500 rounded-full flex items-center justify-center mx-auto mb-4\",children:/*#__PURE__*/_jsx(User,{className:\"w-16 h-16 text-white\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"text-white text-lg font-medium\",children:(user===null||user===void 0?void 0:user.name)||'‡§ï‡§ø‡§∏‡§æ‡§®'}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-300 text-sm\",children:\"\\u0906\\u092A\\u0915\\u093E \\u0935\\u0940\\u0921\\u093F\\u092F\\u094B\"})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-32 h-32 bg-gray-700 rounded-full flex items-center justify-center mx-auto mb-4\",children:/*#__PURE__*/_jsx(VideoOff,{className:\"w-16 h-16 text-gray-400\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-400 text-lg\",children:\"\\u0935\\u0940\\u0921\\u093F\\u092F\\u094B \\u092C\\u0902\\u0926 \\u0939\\u0948\"})]})}),currentSpeaker==='farmer'&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-4 left-4 bg-green-500 text-white px-3 py-1 rounded-full text-sm font-medium animate-pulse\",children:\"\\uD83C\\uDFA4 \\u092C\\u094B\\u0932 \\u0930\\u0939\\u0947 \\u0939\\u0948\\u0902\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"absolute top-4 right-4 flex space-x-2\",children:[!isAudioOn&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-500 text-white p-2 rounded-full\",children:/*#__PURE__*/_jsx(MicOff,{className:\"w-4 h-4\"})}),!isVideoOn&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-500 text-white p-2 rounded-full\",children:/*#__PURE__*/_jsx(VideoOff,{className:\"w-4 h-4\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute bottom-4 left-4 bg-black/50 text-white px-3 py-1 rounded-lg\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium\",children:(user===null||user===void 0?void 0:user.name)||'‡§ï‡§ø‡§∏‡§æ‡§®'})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative bg-gray-900 rounded-xl overflow-hidden shadow-2xl\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 bg-gradient-to-br from-blue-600/20 to-purple-600/20 z-10\"}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-32 h-32 rounded-full flex items-center justify-center mx-auto mb-4 transition-all duration-300 \".concat(isKrishiMitraSpeaking?'bg-gradient-to-r from-blue-500 to-purple-500 animate-pulse':'bg-gradient-to-r from-blue-600 to-purple-600'),children:/*#__PURE__*/_jsx(Bot,{className:\"w-16 h-16 text-white\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"text-white text-lg font-medium\",children:\"KrishiMitra AI\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-300 text-sm\",children:\"\\u0906\\u092A\\u0915\\u093E AI \\u0938\\u0939\\u093E\\u092F\\u0915\"})]})}),currentSpeaker==='krishimitra'&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-4 left-4 bg-blue-500 text-white px-3 py-1 rounded-full text-sm font-medium animate-pulse\",children:\"\\uD83E\\uDD16 \\u092C\\u094B\\u0932 \\u0930\\u0939\\u093E \\u0939\\u0948\"}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-4 right-4 flex space-x-2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"px-3 py-1 rounded-full text-sm \".concat(isRealtimeActive?'bg-blue-500 text-white animate-pulse':'bg-green-500 text-white'),children:isRealtimeActive?'üîÑ Realtime':'AI ‡§∏‡§ï‡•ç‡§∞‡§ø‡§Ø'})}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute bottom-4 left-4 bg-black/50 text-white px-3 py-1 rounded-lg\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium\",children:\"KrishiMitra AI\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 bg-white rounded-xl shadow-lg p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:toggleAudio,className:\"p-4 rounded-full transition-all duration-200 \".concat(isMuted?'bg-red-500 text-white hover:bg-red-600':'bg-gray-100 text-gray-700 hover:bg-gray-200'),children:isMuted?/*#__PURE__*/_jsx(MicOff,{className:\"w-6 h-6\"}):/*#__PURE__*/_jsx(Mic,{className:\"w-6 h-6\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:toggleVideo,className:\"p-4 rounded-full transition-all duration-200 \".concat(!isVideoOn?'bg-red-500 text-white hover:bg-red-600':'bg-gray-100 text-gray-700 hover:bg-gray-200'),children:isVideoOn?/*#__PURE__*/_jsx(Video,{className:\"w-6 h-6\"}):/*#__PURE__*/_jsx(VideoOff,{className:\"w-6 h-6\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:handleVoiceToggle,className:\"p-4 rounded-full transition-all duration-200 \".concat(isRecording?'bg-red-500 text-white hover:bg-red-600 animate-pulse':'bg-green-500 text-white hover:bg-green-600'),children:isRecording?/*#__PURE__*/_jsx(MicOff,{className:\"w-6 h-6\"}):/*#__PURE__*/_jsx(Mic,{className:\"w-6 h-6\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:stopRealtimeSession,className:\"p-4 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors\",children:/*#__PURE__*/_jsx(PhoneOff,{className:\"w-6 h-6\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:startRealtimeSession,disabled:isRealtimeActive,className:\"p-4 rounded-full transition-colors \".concat(isRealtimeActive?'bg-green-600 text-white cursor-not-allowed':'bg-green-500 text-white hover:bg-green-600'),children:/*#__PURE__*/_jsx(Phone,{className:\"w-6 h-6\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"p-4 bg-gray-100 text-gray-700 rounded-full hover:bg-gray-200 transition-colors\",children:/*#__PURE__*/_jsx(Settings,{className:\"w-6 h-6\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"p-4 bg-gray-100 text-gray-700 rounded-full hover:bg-gray-200 transition-colors\",children:/*#__PURE__*/_jsx(MoreVertical,{className:\"w-6 h-6\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 pt-6 border-t border-gray-200\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-medium text-gray-700 mb-3\",children:\"\\u0924\\u094D\\u0935\\u0930\\u093F\\u0924 \\u0915\\u093E\\u0930\\u094D\\u092F\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap gap-3\",children:quickActions.map((action,index)=>/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleQuickAction(action.text),className:\"\".concat(action.color,\" text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center space-x-2\"),children:[action.icon,/*#__PURE__*/_jsx(\"span\",{children:action.text})]},index))})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 pt-4 border-t border-gray-200\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-3\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:inputText,onChange:e=>setInputText(e.target.value),onKeyPress:handleKeyPress,placeholder:\"\\u092C\\u094B\\u0932\\u0915\\u0930 \\u092A\\u0942\\u091B\\u0947\\u0902 \\u092F\\u093E \\u091F\\u093E\\u0907\\u092A \\u0915\\u0930\\u0947\\u0902 - \\u092B\\u0938\\u0932, \\u090B\\u0923, \\u092E\\u0902\\u0921\\u0940 \\u092D\\u093E\\u0935, \\u092F\\u093E \\u0938\\u0930\\u0915\\u093E\\u0930\\u0940 \\u092F\\u094B\\u091C\\u0928\\u093E\\u090F\\u0902...\",className:\"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSendMessage,disabled:!inputText.trim(),className:\"px-6 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\",children:\"\\u092D\\u0947\\u091C\\u0947\\u0902\"})]})})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white border-t mt-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-7xl mx-auto px-4 py-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between text-sm text-gray-500\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Powered by KrishiMitra AI\"}),/*#__PURE__*/_jsx(\"span\",{children:\"OpenAI Voice API \\u2022 Real-time AI Assistant\"})]})})})]});};export default Chat;","map":{"version":3,"names":["React","useState","useEffect","useRef","Mic","MicOff","Phone","PhoneOff","Video","VideoOff","Settings","User","Bot","Volume2","Camera","MoreVertical","Minimize2","Maximize2","useAuth","useChat","toast","jsx","_jsx","jsxs","_jsxs","Chat","user","messages","sendMessage","isConnected","inputText","setInputText","selectedLanguage","setSelectedLanguage","isRecording","setIsRecording","mediaRecorder","setMediaRecorder","audioChunks","setAudioChunks","isListening","setIsListening","voicePrompt","setVoicePrompt","isVideoOn","setIsVideoOn","isAudioOn","setIsAudioOn","isMuted","setIsMuted","isFullscreen","setIsFullscreen","showControls","setShowControls","isKrishiMitraSpeaking","setIsKrishiMitraSpeaking","currentSpeaker","setCurrentSpeaker","realtimeSession","setRealtimeSession","isRealtimeActive","setIsRealtimeActive","messagesEndRef","videoRef","krishiMitraVideoRef","languages","code","name","flag","length","addMessage","id","text","concat","sender","timestamp","Date","metadata","voice_ready","intent","suggestions","_messagesEndRef$curre","current","scrollIntoView","behavior","message","console","log","handleSendMessage","trim","setTimeout","handleKeyPress","e","key","shiftKey","preventDefault","startVoiceRecording","stream","navigator","mediaDevices","getUserMedia","audio","recorder","MediaRecorder","chunks","ondataavailable","event","data","size","push","onstop","audioBlob","Blob","type","processVoiceInput","getTracks","forEach","track","stop","start","success","state","stopVoiceRecording","error","formData","FormData","append","response","fetch","method","body","ok","Error","result","json","language","mockVoiceTexts","mockText","handleVoiceToggle","handleQuickAction","action","toLowerCase","toggleVideo","toggleAudio","toggleFullscreen","startRealtimeSession","headers","JSON","stringify","voice","user_id","farmer_context","location","crops","experience","land_size","current_concerns","sessionData","stopRealtimeSession","quickActions","icon","className","color","children","value","onChange","target","map","lang","onClick","disabled","index","onKeyPress","placeholder"],"sources":["/Users/roopkishor.singh/Downloads/capital-one-hackathon/frontend/src/pages/Chat.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { \n  Mic, \n  MicOff, \n  Phone, \n  PhoneOff, \n  Video, \n  VideoOff, \n  Settings, \n  MessageSquare,\n  User,\n  Bot,\n  Volume2,\n  VolumeX,\n  Camera,\n  CameraOff,\n  MoreVertical,\n  Minimize2,\n  Maximize2\n} from 'lucide-react';\nimport { useAuth } from '../hooks/useAuth';\nimport { useChat } from '../contexts/ChatContext';\nimport { toast } from 'react-hot-toast';\n\ninterface Message {\n  id: string;\n  text: string;\n  sender: 'user' | 'ai';\n  timestamp: Date;\n  metadata?: {\n    language?: string;\n    confidence?: number;\n    voice_ready?: string[];\n    intent?: string;\n    suggestions?: string[];\n  };\n}\n\nconst Chat: React.FC = () => {\n  const { user } = useAuth();\n  const { messages, sendMessage, isConnected } = useChat();\n  const [inputText, setInputText] = useState('');\n  const [selectedLanguage, setSelectedLanguage] = useState('hi');\n  const [isRecording, setIsRecording] = useState(false);\n  const [mediaRecorder, setMediaRecorder] = useState<MediaRecorder | null>(null);\n  const [audioChunks, setAudioChunks] = useState<Blob[]>([]);\n  const [isListening, setIsListening] = useState(false);\n  const [voicePrompt, setVoicePrompt] = useState('‡§Æ‡§æ‡§á‡§ï ‡§™‡§∞ ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§ï‡§∞‡§ï‡•á ‡§¨‡•ã‡§≤‡•á‡§Ç');\n  \n  // Video call states\n  const [isVideoOn, setIsVideoOn] = useState(true);\n  const [isAudioOn, setIsAudioOn] = useState(true);\n  const [isMuted, setIsMuted] = useState(false);\n  const [isFullscreen, setIsFullscreen] = useState(false);\n  const [showControls, setShowControls] = useState(true);\n  const [isKrishiMitraSpeaking, setIsKrishiMitraSpeaking] = useState(false);\n  const [currentSpeaker, setCurrentSpeaker] = useState<'farmer' | 'krishimitra' | null>(null);\n  const [realtimeSession, setRealtimeSession] = useState<any>(null);\n  const [isRealtimeActive, setIsRealtimeActive] = useState(false);\n  \n  const messagesEndRef = useRef<HTMLDivElement>(null);\n  const videoRef = useRef<HTMLVideoElement>(null);\n  const krishiMitraVideoRef = useRef<HTMLVideoElement>(null);\n\n  const languages = [\n    { code: 'hi', name: '‡§π‡§ø‡§Ç‡§¶‡•Ä', flag: 'üáÆüá≥' },\n    { code: 'en', name: 'English', flag: 'üáÆüá≥' },\n    { code: 'bn', name: '‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ', flag: 'üáÆüá≥' },\n    { code: 'ta', name: '‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç', flag: 'üáÆüá≥' },\n    { code: 'te', name: '‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å', flag: 'üáÆüá≥' },\n    { code: 'mr', name: '‡§Æ‡§∞‡§æ‡§†‡•Ä', flag: 'üáÆüá≥' },\n    { code: 'gu', name: '‡™ó‡´Å‡™ú‡™∞‡™æ‡™§‡´Ä', flag: 'üáÆüá≥' },\n    { code: 'pa', name: '‡®™‡©∞‡®ú‡®æ‡®¨‡©Ä', flag: 'üáÆüá≥' },\n    { code: 'or', name: '‡¨ì‡¨°‡¨º‡¨ø‡¨Ü', flag: 'üáÆüá≥' },\n    { code: 'ml', name: '‡¥Æ‡¥≤‡¥Ø‡¥æ‡¥≥‡¥Ç', flag: 'üáÆüá≥' },\n    { code: 'kn', name: '‡≤ï‡≤®‡≥ç‡≤®‡≤°', flag: 'üáÆüá≥' }\n  ];\n\n  useEffect(() => {\n    // Add welcome message\n    if (messages.length === 0) {\n      addMessage({\n        id: 'welcome',\n        text: `‡§®‡§Æ‡§∏‡•ç‡§§‡•á ${user?.name || '‡§ï‡§ø‡§∏‡§æ‡§®'}! ‡§Æ‡•à‡§Ç KrishiMitra ‡§Ü‡§™‡§ï‡•Ä ‡§ï‡•à‡§∏‡•á ‡§Æ‡§¶‡§¶ ‡§ï‡§∞ ‡§∏‡§ï‡§§‡§æ ‡§π‡•Ç‡§Ç? ‡§¨‡•ã‡§≤‡§ï‡§∞ ‡§Ö‡§™‡§®‡§æ ‡§∏‡§µ‡§æ‡§≤ ‡§™‡•Ç‡§õ‡•á‡§Ç - ‡§´‡§∏‡§≤, ‡§ã‡§£, ‡§Æ‡§Ç‡§°‡•Ä ‡§≠‡§æ‡§µ, ‡§Æ‡•å‡§∏‡§Æ ‡§Ø‡§æ ‡§∏‡§∞‡§ï‡§æ‡§∞‡•Ä ‡§Ø‡•ã‡§ú‡§®‡§æ‡§ì‡§Ç ‡§ï‡•á ‡§¨‡§æ‡§∞‡•á ‡§Æ‡•á‡§Ç‡•§`,\n        sender: 'ai',\n        timestamp: new Date(),\n        metadata: {\n          voice_ready: [`‡§®‡§Æ‡§∏‡•ç‡§§‡•á ${user?.name || '‡§ï‡§ø‡§∏‡§æ‡§®'}! ‡§Æ‡•à‡§Ç KrishiMitra ‡§Ü‡§™‡§ï‡•Ä ‡§ï‡•à‡§∏‡•á ‡§Æ‡§¶‡§¶ ‡§ï‡§∞ ‡§∏‡§ï‡§§‡§æ ‡§π‡•Ç‡§Ç?`, \"‡§¨‡•ã‡§≤‡§ï‡§∞ ‡§Ö‡§™‡§®‡§æ ‡§∏‡§µ‡§æ‡§≤ ‡§™‡•Ç‡§õ‡•á‡§Ç - ‡§´‡§∏‡§≤, ‡§ã‡§£, ‡§Æ‡§Ç‡§°‡•Ä ‡§≠‡§æ‡§µ, ‡§Æ‡•å‡§∏‡§Æ ‡§Ø‡§æ ‡§∏‡§∞‡§ï‡§æ‡§∞‡•Ä ‡§Ø‡•ã‡§ú‡§®‡§æ‡§ì‡§Ç ‡§ï‡•á ‡§¨‡§æ‡§∞‡•á ‡§Æ‡•á‡§Ç‡•§\"],\n          intent: 'welcome',\n          suggestions: ['‡§´‡§∏‡§≤ ‡§ï‡•Ä ‡§∏‡§≤‡§æ‡§π ‡§≤‡•á‡§Ç', '‡§ã‡§£ ‡§ï‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§≤‡•á‡§Ç', '‡§Æ‡§Ç‡§°‡•Ä ‡§≠‡§æ‡§µ ‡§ú‡§æ‡§®‡•á‡§Ç', '‡§Æ‡•å‡§∏‡§Æ ‡§ï‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§≤‡•á‡§Ç']\n        }\n      });\n    }\n  }, [messages.length, user?.name]);\n\n  useEffect(() => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  }, [messages]);\n\n  const addMessage = (message: Message) => {\n    // This would be handled by the chat context\n    console.log('Adding message:', message);\n  };\n\n  const handleSendMessage = async () => {\n    if (!inputText.trim()) return;\n    \n    setCurrentSpeaker('farmer');\n    setIsKrishiMitraSpeaking(false);\n    \n    await sendMessage(inputText, selectedLanguage);\n    setInputText('');\n    \n    // Simulate KrishiMitra response\n    setTimeout(() => {\n      setCurrentSpeaker('krishimitra');\n      setIsKrishiMitraSpeaking(true);\n      \n      // Stop speaking after 3 seconds\n      setTimeout(() => {\n        setIsKrishiMitraSpeaking(false);\n        setCurrentSpeaker(null);\n      }, 3000);\n    }, 1000);\n  };\n\n  const handleKeyPress = (e: React.KeyboardEvent) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSendMessage();\n    }\n  };\n\n  const startVoiceRecording = async () => {\n    try {\n      const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\n      const recorder = new MediaRecorder(stream);\n      const chunks: Blob[] = [];\n      \n      recorder.ondataavailable = (event) => {\n        if (event.data.size > 0) {\n          chunks.push(event.data);\n        }\n      };\n      \n      recorder.onstop = async () => {\n        const audioBlob = new Blob(chunks, { type: 'audio/wav' });\n        await processVoiceInput(audioBlob);\n        stream.getTracks().forEach(track => track.stop());\n      };\n      \n      setMediaRecorder(recorder);\n      setAudioChunks(chunks);\n      recorder.start();\n      setIsRecording(true);\n      setIsListening(true);\n      setVoicePrompt('‡§¨‡•ã‡§≤ ‡§∞‡§π‡•á ‡§π‡•à‡§Ç...');\n      setCurrentSpeaker('farmer');\n      toast.success('üé§ KrishiMitra ‡§∏‡•Å‡§® ‡§∞‡§π‡§æ ‡§π‡•à‡•§ ‡§¨‡•ã‡§≤‡•á‡§Ç...');\n      \n      // Auto-stop after 15 seconds\n      setTimeout(() => {\n        if (recorder.state === 'recording') {\n          stopVoiceRecording();\n        }\n      }, 15000);\n      \n    } catch (error) {\n      console.error('Error starting voice recording:', error);\n      toast.error('‡§Æ‡§æ‡§á‡§ï‡•ç‡§∞‡•ã‡§´‡•ã‡§® ‡§ï‡•Ä ‡§Ö‡§®‡•Å‡§Æ‡§§‡§ø ‡§¶‡•á‡§Ç');\n    }\n  };\n\n  const stopVoiceRecording = () => {\n    if (mediaRecorder && mediaRecorder.state === 'recording') {\n      mediaRecorder.stop();\n      setIsRecording(false);\n      setIsListening(false);\n      setVoicePrompt('‡§Æ‡§æ‡§á‡§ï ‡§™‡§∞ ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§ï‡§∞‡§ï‡•á ‡§¨‡•ã‡§≤‡•á‡§Ç');\n      setCurrentSpeaker(null);\n      toast.success('‚úÖ ‡§Ü‡§µ‡§æ‡§ú ‡§∞‡§ø‡§ï‡•â‡§∞‡•ç‡§°‡§ø‡§Ç‡§ó ‡§¨‡§Ç‡§¶');\n    }\n  };\n\n  const processVoiceInput = async (audioBlob: Blob) => {\n    try {\n      toast.success('üéµ OpenAI Voice API ‡§∏‡•á ‡§Ü‡§µ‡§æ‡§ú ‡§™‡•ç‡§∞‡•ã‡§∏‡•á‡§∏ ‡§π‡•ã ‡§∞‡§π‡•Ä ‡§π‡•à...');\n      \n      // Create FormData for file upload\n      const formData = new FormData();\n      formData.append('audio_file', audioBlob, 'voice_input.wav');\n      formData.append('language', selectedLanguage);\n      \n      // Send to OpenAI Voice API endpoint\n      const response = await fetch('/api/v1/voice/speech-to-text', {\n        method: 'POST',\n        body: formData,\n      });\n      \n      if (!response.ok) {\n        throw new Error('Voice processing failed');\n      }\n      \n      const result = await response.json();\n      \n      if (result.text) {\n        // Set the transcribed text and send the message\n        setInputText(result.text);\n        await sendMessage(result.text, result.language || selectedLanguage);\n        \n        toast.success('üéØ OpenAI Whisper ‡§∏‡•á ‡§Ü‡§µ‡§æ‡§ú ‡§∏‡§´‡§≤‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§™‡•ç‡§∞‡•ã‡§∏‡•á‡§∏ ‡§π‡•Å‡§à!');\n      } else {\n        throw new Error('No text detected');\n      }\n      \n    } catch (error) {\n      console.error('Error processing voice input:', error);\n      \n      // Fallback to mock processing for demo\n      toast.success('üîÑ OpenAI API ‡§ï‡•á ‡§∏‡§æ‡§• ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ, ‡§°‡•á‡§Æ‡•ã ‡§Æ‡•ã‡§° ‡§Æ‡•á‡§Ç ‡§ú‡§æ ‡§∞‡§π‡•á ‡§π‡•à‡§Ç...');\n      \n      const mockVoiceTexts = {\n        'hi': '‡§Æ‡•á‡§∞‡•Ä ‡§´‡§∏‡§≤ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ï‡•å‡§® ‡§∏‡•Ä ‡§´‡§∏‡§≤ ‡§∏‡§¨‡§∏‡•á ‡§Ö‡§ö‡•ç‡§õ‡•Ä ‡§π‡•ã‡§ó‡•Ä?',\n        'bn': '‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶´‡¶∏‡¶≤‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶ï‡ßã‡¶® ‡¶´‡¶∏‡¶≤ ‡¶∏‡¶¨‡¶ö‡ßá‡¶Ø‡¶º‡ßá ‡¶≠‡¶æ‡¶≤‡ßã ‡¶π‡¶¨‡ßá?',\n        'ta': '‡Æé‡Æ©‡Øç ‡Æ™‡ÆØ‡Æø‡Æ∞‡ØÅ‡Æï‡Øç‡Æï‡ØÅ ‡Æé‡Æ®‡Øç‡Æ§ ‡Æ™‡ÆØ‡Æø‡Æ∞‡Øç ‡Æö‡Æø‡Æ±‡Æ®‡Øç‡Æ§‡Æ§‡ØÅ?',\n        'te': '‡∞®‡∞æ ‡∞™‡∞Ç‡∞ü‡∞ï‡±Å ‡∞è ‡∞™‡∞Ç‡∞ü ‡∞â‡∞§‡±ç‡∞§‡∞Æ‡∞Ç?',\n        'mr': '‡∞Æ‡∞æ‡∞ú‡±Ä ‡∞™‡∞ø‡∞ï‡∞æ‡∞∏‡∞æ‡∞ü‡∞ø ‡∞ï‡±ã‡∞®‡∞§‡±á ‡∞™‡±Ä‡∞ï‡±ç ‡∞∏‡∞∞‡±ç‡∞µ‡±ã‡∞§‡±ç‡∞§‡∞Æ‡±ç ‡∞Ö‡∞π‡±á?',\n        'gu': '‡™Æ‡™æ‡™∞‡™æ ‡™™‡™æ‡™ï ‡™Æ‡™æ‡™ü‡´á ‡™ï‡™Ø‡´Å‡™Ç ‡™™‡™æ‡™ï ‡™∂‡´ç‡™∞‡´á‡™∑‡´ç‡™† ‡™õ‡´á?',\n        'pa': '‡®Æ‡©á‡®∞‡©Ä ‡®´‡®∏‡®≤ ‡®≤‡®à ‡®ï‡®ø‡®π‡©ú‡©Ä ‡®´‡®∏‡®≤ ‡®∏‡®≠ ‡®§‡©ã‡®Ç ‡®µ‡®ß‡©Ä‡®Ü ‡®π‡©à?',\n        'or': '‡¨Æ‡≠ã ‡¨´‡¨∏‡¨≤ ‡¨™‡¨æ‡¨á‡¨Å ‡¨ï‡≠á‡¨â‡¨Å ‡¨´‡¨∏‡¨≤ ‡¨∏‡¨∞‡≠ç‡¨¨‡≠ã‡¨§‡≠ç‡¨§‡¨Æ?',\n        'ml': '‡¥é‡¥®‡µç‡¥±‡µÜ ‡¥µ‡¥ø‡¥≥‡¥Ø‡µç‡¥ï‡µç‡¥ï‡µç ‡¥è‡¥§‡µç ‡¥µ‡¥ø‡¥≥ ‡¥Æ‡¥ø‡¥ï‡¥ö‡µç‡¥ö‡¥§‡¥æ‡¥£‡µç?',\n        'kn': '‡≤®‡≤®‡≥ç‡≤® ‡≤¨‡≥Ü‡≤≥‡≥Ü‡≤ó‡≤æ‡≤ó‡≤ø ‡≤Ø‡≤æ‡≤µ ‡≤¨‡≥Ü‡≤≥‡≥Ü ‡≤â‡≤§‡≥ç‡≤§‡≤Æ?'\n      };\n      \n      const mockText = mockVoiceTexts[selectedLanguage as keyof typeof mockVoiceTexts] || mockVoiceTexts['hi'];\n      setInputText(mockText);\n      await sendMessage(mockText, selectedLanguage);\n      \n      toast.success('üéØ ‡§°‡•á‡§Æ‡•ã ‡§Æ‡•ã‡§° ‡§Æ‡•á‡§Ç ‡§Ü‡§µ‡§æ‡§ú ‡§™‡•ç‡§∞‡•ã‡§∏‡•á‡§∏ ‡§π‡•Å‡§à!');\n    }\n  };\n\n  const handleVoiceToggle = () => {\n    if (isRecording) {\n      stopVoiceRecording();\n    } else {\n      startVoiceRecording();\n    }\n  };\n\n  const handleQuickAction = async (action: string) => {\n    const message = `Tell me about ${action.toLowerCase()}`;\n    setInputText(message);\n    await sendMessage(message, selectedLanguage);\n  };\n\n  const toggleVideo = () => {\n    setIsVideoOn(!isVideoOn);\n    toast.success(isVideoOn ? 'üìπ ‡§µ‡•Ä‡§°‡§ø‡§Ø‡•ã ‡§¨‡§Ç‡§¶' : 'üìπ ‡§µ‡•Ä‡§°‡§ø‡§Ø‡•ã ‡§ö‡§æ‡§≤‡•Ç');\n  };\n\n  const toggleAudio = () => {\n    setIsAudioOn(!isAudioOn);\n    setIsMuted(!isMuted);\n    toast.success(isMuted ? 'üîä ‡§ë‡§°‡§ø‡§Ø‡•ã ‡§ö‡§æ‡§≤‡•Ç' : 'üîá ‡§ë‡§°‡§ø‡§Ø‡•ã ‡§¨‡§Ç‡§¶');\n  };\n\n  const toggleFullscreen = () => {\n    setIsFullscreen(!isFullscreen);\n    toast.success(isFullscreen ? 'üì± ‡§™‡•Ç‡§∞‡•ç‡§£ ‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§® ‡§¨‡§Ç‡§¶' : 'üì± ‡§™‡•Ç‡§∞‡•ç‡§£ ‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§® ‡§ö‡§æ‡§≤‡•Ç');\n  };\n\n  const startRealtimeSession = async () => {\n    try {\n      toast.success('üîÑ KrishiMitra Realtime session ‡§∂‡•Å‡§∞‡•Ç ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à...');\n      \n      const response = await fetch('/api/v1/voice/realtime/session', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          voice: 'alloy',\n          language: selectedLanguage,\n          user_id: user?.id,\n          farmer_context: {\n            location: 'Punjab, India',\n            crops: ['wheat', 'rice', 'cotton'],\n            experience: '15 years',\n            land_size: '10 acres',\n            current_concerns: ['loan repayment', 'crop selection', 'market prices']\n          }\n        }),\n      });\n\n      if (!response.ok) {\n        throw new Error('Failed to create realtime session');\n      }\n\n      const sessionData = await response.json();\n      setRealtimeSession(sessionData);\n      setIsRealtimeActive(true);\n      \n      toast.success('‚úÖ KrishiMitra Realtime session ‡§∏‡§ï‡•ç‡§∞‡§ø‡§Ø ‡§π‡•à! ‡§Ö‡§¨ ‡§Ü‡§™ ‡§¨‡•ã‡§≤ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç‡•§');\n      \n    } catch (error) {\n      console.error('Error starting realtime session:', error);\n      toast.error('‚ùå Realtime session ‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞‡§®‡•á ‡§Æ‡•á‡§Ç ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§´‡§ø‡§∞ ‡§∏‡•á ‡§ï‡•ã‡§∂‡§ø‡§∂ ‡§ï‡§∞‡•á‡§Ç‡•§');\n    }\n  };\n\n  const stopRealtimeSession = () => {\n    setRealtimeSession(null);\n    setIsRealtimeActive(false);\n    toast.success('üõë KrishiMitra Realtime session ‡§¨‡§Ç‡§¶ ‡§π‡•ã ‡§ó‡§Ø‡§æ ‡§π‡•à‡•§');\n  };\n\n  const quickActions = [\n    { icon: <User className=\"w-5 h-5\" />, text: '‡§´‡§∏‡§≤ ‡§∏‡§≤‡§æ‡§π', color: 'bg-green-500 hover:bg-green-600' },\n    { icon: <Bot className=\"w-5 h-5\" />, text: '‡§ã‡§£ ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä', color: 'bg-blue-500 hover:bg-blue-600' },\n    { icon: <Volume2 className=\"w-5 h-5\" />, text: '‡§Æ‡§Ç‡§°‡•Ä ‡§≠‡§æ‡§µ', color: 'bg-yellow-500 hover:bg-yellow-600' },\n    { icon: <Camera className=\"w-5 h-5\" />, text: '‡§Æ‡•å‡§∏‡§Æ ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä', color: 'bg-purple-500 hover:bg-purple-600' }\n  ];\n\n  return (\n    <div className={`min-h-screen bg-gradient-to-br from-green-50 to-blue-50 ${isFullscreen ? 'fixed inset-0 z-50' : ''}`}>\n      {/* Header */}\n      <div className=\"bg-white shadow-sm border-b\">\n        <div className=\"max-w-7xl mx-auto px-4 py-3\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center space-x-3\">\n              <div className=\"w-10 h-10 bg-gradient-to-r from-green-500 to-blue-500 rounded-full flex items-center justify-center\">\n                <Bot className=\"w-6 h-6 text-white\" />\n              </div>\n              <div>\n                <h1 className=\"text-lg font-semibold text-gray-900\">KrishiMitra Video Call</h1>\n                <p className=\"text-sm text-gray-500\">\n                  {isConnected ? 'üü¢ Connected' : 'üî¥ Disconnected'}\n                </p>\n              </div>\n            </div>\n            \n            <div className=\"flex items-center space-x-2\">\n              <select\n                value={selectedLanguage}\n                onChange={(e) => setSelectedLanguage(e.target.value)}\n                className=\"px-3 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-green-500\"\n              >\n                {languages.map((lang) => (\n                  <option key={lang.code} value={lang.code}>\n                    {lang.flag} {lang.name}\n                  </option>\n                ))}\n              </select>\n              \n              <button\n                onClick={toggleFullscreen}\n                className=\"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors\"\n              >\n                {isFullscreen ? <Minimize2 className=\"w-5 h-5\" /> : <Maximize2 className=\"w-5 h-5\" />}\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Video Call Interface */}\n      <div className=\"max-w-7xl mx-auto px-4 py-6\">\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6 h-[calc(100vh-200px)]\">\n          \n          {/* Farmer's Video Panel */}\n          <div className=\"relative bg-gray-900 rounded-xl overflow-hidden shadow-2xl\">\n            <div className=\"absolute inset-0 bg-gradient-to-br from-green-600/20 to-blue-600/20 z-10\" />\n            \n            {/* Video Placeholder */}\n            <div className=\"absolute inset-0 flex items-center justify-center\">\n              {isVideoOn ? (\n                <div className=\"text-center\">\n                  <div className=\"w-32 h-32 bg-gradient-to-r from-green-500 to-blue-500 rounded-full flex items-center justify-center mx-auto mb-4\">\n                    <User className=\"w-16 h-16 text-white\" />\n                  </div>\n                  <p className=\"text-white text-lg font-medium\">{user?.name || '‡§ï‡§ø‡§∏‡§æ‡§®'}</p>\n                  <p className=\"text-gray-300 text-sm\">‡§Ü‡§™‡§ï‡§æ ‡§µ‡•Ä‡§°‡§ø‡§Ø‡•ã</p>\n                </div>\n              ) : (\n                <div className=\"text-center\">\n                  <div className=\"w-32 h-32 bg-gray-700 rounded-full flex items-center justify-center mx-auto mb-4\">\n                    <VideoOff className=\"w-16 h-16 text-gray-400\" />\n                  </div>\n                  <p className=\"text-gray-400 text-lg\">‡§µ‡•Ä‡§°‡§ø‡§Ø‡•ã ‡§¨‡§Ç‡§¶ ‡§π‡•à</p>\n                </div>\n              )}\n            </div>\n            \n            {/* Speaking Indicator */}\n            {currentSpeaker === 'farmer' && (\n              <div className=\"absolute top-4 left-4 bg-green-500 text-white px-3 py-1 rounded-full text-sm font-medium animate-pulse\">\n                üé§ ‡§¨‡•ã‡§≤ ‡§∞‡§π‡•á ‡§π‡•à‡§Ç\n              </div>\n            )}\n            \n            {/* Status Indicators */}\n            <div className=\"absolute top-4 right-4 flex space-x-2\">\n              {!isAudioOn && (\n                <div className=\"bg-red-500 text-white p-2 rounded-full\">\n                  <MicOff className=\"w-4 h-4\" />\n                </div>\n              )}\n              {!isVideoOn && (\n                <div className=\"bg-red-500 text-white p-2 rounded-full\">\n                  <VideoOff className=\"w-4 h-4\" />\n                </div>\n              )}\n            </div>\n            \n            {/* Name Tag */}\n            <div className=\"absolute bottom-4 left-4 bg-black/50 text-white px-3 py-1 rounded-lg\">\n              <span className=\"text-sm font-medium\">{user?.name || '‡§ï‡§ø‡§∏‡§æ‡§®'}</span>\n            </div>\n          </div>\n\n          {/* KrishiMitra's Video Panel */}\n          <div className=\"relative bg-gray-900 rounded-xl overflow-hidden shadow-2xl\">\n            <div className=\"absolute inset-0 bg-gradient-to-br from-blue-600/20 to-purple-600/20 z-10\" />\n            \n            {/* Video Placeholder */}\n            <div className=\"absolute inset-0 flex items-center justify-center\">\n              <div className=\"text-center\">\n                <div className={`w-32 h-32 rounded-full flex items-center justify-center mx-auto mb-4 transition-all duration-300 ${\n                  isKrishiMitraSpeaking \n                    ? 'bg-gradient-to-r from-blue-500 to-purple-500 animate-pulse' \n                    : 'bg-gradient-to-r from-blue-600 to-purple-600'\n                }`}>\n                  <Bot className=\"w-16 h-16 text-white\" />\n                </div>\n                <p className=\"text-white text-lg font-medium\">KrishiMitra AI</p>\n                <p className=\"text-gray-300 text-sm\">‡§Ü‡§™‡§ï‡§æ AI ‡§∏‡§π‡§æ‡§Ø‡§ï</p>\n              </div>\n            </div>\n            \n            {/* Speaking Indicator */}\n            {currentSpeaker === 'krishimitra' && (\n              <div className=\"absolute top-4 left-4 bg-blue-500 text-white px-3 py-1 rounded-full text-sm font-medium animate-pulse\">\n                ü§ñ ‡§¨‡•ã‡§≤ ‡§∞‡§π‡§æ ‡§π‡•à\n              </div>\n            )}\n            \n            {/* AI Status */}\n            <div className=\"absolute top-4 right-4 flex space-x-2\">\n              <div className={`px-3 py-1 rounded-full text-sm ${\n                isRealtimeActive \n                  ? 'bg-blue-500 text-white animate-pulse' \n                  : 'bg-green-500 text-white'\n              }`}>\n                {isRealtimeActive ? 'üîÑ Realtime' : 'AI ‡§∏‡§ï‡•ç‡§∞‡§ø‡§Ø'}\n              </div>\n            </div>\n            \n            {/* Name Tag */}\n            <div className=\"absolute bottom-4 left-4 bg-black/50 text-white px-3 py-1 rounded-lg\">\n              <span className=\"text-sm font-medium\">KrishiMitra AI</span>\n            </div>\n          </div>\n        </div>\n\n        {/* Control Panel */}\n        <div className=\"mt-6 bg-white rounded-xl shadow-lg p-6\">\n          <div className=\"flex items-center justify-between\">\n            \n            {/* Left Controls */}\n            <div className=\"flex items-center space-x-4\">\n              <button\n                onClick={toggleAudio}\n                className={`p-4 rounded-full transition-all duration-200 ${\n                  isMuted \n                    ? 'bg-red-500 text-white hover:bg-red-600' \n                    : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n                }`}\n              >\n                {isMuted ? <MicOff className=\"w-6 h-6\" /> : <Mic className=\"w-6 h-6\" />}\n              </button>\n              \n              <button\n                onClick={toggleVideo}\n                className={`p-4 rounded-full transition-all duration-200 ${\n                  !isVideoOn \n                    ? 'bg-red-500 text-white hover:bg-red-600' \n                    : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n                }`}\n              >\n                {isVideoOn ? <Video className=\"w-6 h-6\" /> : <VideoOff className=\"w-6 h-6\" />}\n              </button>\n              \n              <button\n                onClick={handleVoiceToggle}\n                className={`p-4 rounded-full transition-all duration-200 ${\n                  isRecording \n                    ? 'bg-red-500 text-white hover:bg-red-600 animate-pulse' \n                    : 'bg-green-500 text-white hover:bg-green-600'\n                }`}\n              >\n                {isRecording ? <MicOff className=\"w-6 h-6\" /> : <Mic className=\"w-6 h-6\" />}\n              </button>\n            </div>\n\n            {/* Center - Call Controls */}\n            <div className=\"flex items-center space-x-4\">\n              <button \n                onClick={stopRealtimeSession}\n                className=\"p-4 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors\"\n              >\n                <PhoneOff className=\"w-6 h-6\" />\n              </button>\n              \n              <button \n                onClick={startRealtimeSession}\n                disabled={isRealtimeActive}\n                className={`p-4 rounded-full transition-colors ${\n                  isRealtimeActive \n                    ? 'bg-green-600 text-white cursor-not-allowed' \n                    : 'bg-green-500 text-white hover:bg-green-600'\n                }`}\n              >\n                <Phone className=\"w-6 h-6\" />\n              </button>\n            </div>\n\n            {/* Right Controls */}\n            <div className=\"flex items-center space-x-4\">\n              <button className=\"p-4 bg-gray-100 text-gray-700 rounded-full hover:bg-gray-200 transition-colors\">\n                <Settings className=\"w-6 h-6\" />\n              </button>\n              \n              <button className=\"p-4 bg-gray-100 text-gray-700 rounded-full hover:bg-gray-200 transition-colors\">\n                <MoreVertical className=\"w-6 h-6\" />\n              </button>\n            </div>\n          </div>\n\n          {/* Quick Actions */}\n          <div className=\"mt-6 pt-6 border-t border-gray-200\">\n            <h3 className=\"text-sm font-medium text-gray-700 mb-3\">‡§§‡•ç‡§µ‡§∞‡§ø‡§§ ‡§ï‡§æ‡§∞‡•ç‡§Ø</h3>\n            <div className=\"flex flex-wrap gap-3\">\n              {quickActions.map((action, index) => (\n                <button\n                  key={index}\n                  onClick={() => handleQuickAction(action.text)}\n                  className={`${action.color} text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center space-x-2`}\n                >\n                  {action.icon}\n                  <span>{action.text}</span>\n                </button>\n              ))}\n            </div>\n          </div>\n\n          {/* Text Input (Hidden by default, can be toggled) */}\n          <div className=\"mt-4 pt-4 border-t border-gray-200\">\n            <div className=\"flex space-x-3\">\n              <input\n                type=\"text\"\n                value={inputText}\n                onChange={(e) => setInputText(e.target.value)}\n                onKeyPress={handleKeyPress}\n                placeholder=\"‡§¨‡•ã‡§≤‡§ï‡§∞ ‡§™‡•Ç‡§õ‡•á‡§Ç ‡§Ø‡§æ ‡§ü‡§æ‡§á‡§™ ‡§ï‡§∞‡•á‡§Ç - ‡§´‡§∏‡§≤, ‡§ã‡§£, ‡§Æ‡§Ç‡§°‡•Ä ‡§≠‡§æ‡§µ, ‡§Ø‡§æ ‡§∏‡§∞‡§ï‡§æ‡§∞‡•Ä ‡§Ø‡•ã‡§ú‡§®‡§æ‡§è‡§Ç...\"\n                className=\"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent\"\n              />\n              <button\n                onClick={handleSendMessage}\n                disabled={!inputText.trim()}\n                className=\"px-6 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n              >\n                ‡§≠‡•á‡§ú‡•á‡§Ç\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Footer */}\n      <div className=\"bg-white border-t mt-6\">\n        <div className=\"max-w-7xl mx-auto px-4 py-3\">\n          <div className=\"flex items-center justify-between text-sm text-gray-500\">\n            <span>Powered by KrishiMitra AI</span>\n            <span>OpenAI Voice API ‚Ä¢ Real-time AI Assistant</span>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Chat;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}